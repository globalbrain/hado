// @ts-self-types="https://esm.sh/@sentry/deno@9.19.0/build/esm/index.d.ts"
var l=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var G="9.19.0";var _=globalThis;function v(){return Oe(_),_}function Oe(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||G,t[G]=t[G]||{}}function ye(e,t,n=_){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[G]=r[G]||{};return o[e]||(o[e]=t())}import{patchGlobal as Ts}from"npm:@brc-dd/globals@^0.1.0";var ao=Object.prototype.toString;function k(e){switch(ao.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return j(e,Error)}}function yt(e,t){return ao.call(e)===`[object ${t}]`}function In(e){return yt(e,"ErrorEvent")}function Ie(e){return yt(e,"String")}function Ae(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function xe(e){return e===null||Ae(e)||typeof e!="object"&&typeof e!="function"}function F(e){return yt(e,"Object")}function An(e){return typeof Event<"u"&&j(e,Event)}function xn(e){return typeof Element<"u"&&j(e,Element)}function bn(e){return yt(e,"RegExp")}function L(e){return!!(e?.then&&typeof e.then=="function")}function Rn(e){return F(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function j(e,t){try{return e instanceof t}catch{return!1}}function qe(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Nn(e){return typeof Request<"u"&&j(e,Request)}var gs=_,_s=80;function Cn(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,f=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||_s;for(;n&&i++<r&&(u=hs(n,f),!(u==="html"||i>1&&s+o.length*c+u.length>=d));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function hs(e,t){let n=e,r=[];if(!n?.tagName)return"";if(gs.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&Ie(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}var Ss="Sentry Logger ",K=["debug","info","warn","error","log","assert","trace"],Pe={};function z(e){if(!("console"in _))return e();let t=_.console,n={},r=Object.keys(Pe);r.forEach(o=>{let i=Pe[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function Es(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return l?K.forEach(n=>{t[n]=(...r)=>{e&&z(()=>{_.console[n](`${Ss}[${n}]:`,...r)})}}):K.forEach(n=>{t[n]=()=>{}}),t}var p=ye("logger",Es);function Y(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Ve(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function X(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{qe(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function co(e,t,n=!1){return Ie(e)?bn(t)?t.test(e):Ie(t)?n?e===t:e.includes(t):!1:!1}function ke(e,t=[],n=!1){return t.some(r=>co(e,r,n))}function Ke(e,t,n){function r(i){if(!(t in i))return;let s=i[t],a=n(s);typeof a=="function"&&fo(a,s);try{i[t]=a}catch(c){l&&p.log(`Failed to replace method "${t}" in object`,i,c)}return i}let o=Object.prototype.toString.call(e);o==="[object console]"?o="console":o==="[object Window]"?o="globalThis":o=void 0,o?Ts(o,r):r(e)}function b(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{l&&p.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function fo(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,b(e,"__sentry_original__",t)}catch{}}function On(e){return e.__sentry_original__}function It(e){if(k(e))return{message:e.message,name:e.name,stack:e.stack,...po(e)};if(An(e)){let t={type:e.type,target:uo(e.target),currentTarget:uo(e.currentTarget),...po(e)};return typeof CustomEvent<"u"&&j(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function uo(e){try{return xn(e)?Cn(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function po(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function vn(e,t=40){let n=Object.keys(It(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Y(r,t);for(let o=n.length;o>0;o--){let i=n.slice(0,o).join(", ");if(!(i.length>t))return o===n.length?i:Y(i,t)}return""}function ys(){let e=_;return e.crypto||e.msCrypto}function A(e=ys()){let t=()=>Math.random()*16;try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{let n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function lo(e){return e.exception?.values?.[0]}function ie(e){let{message:t,event_id:n}=e;if(t)return t;let r=lo(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function wn(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function be(e,t){let n=lo(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function Dn(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>Ve(s,0));let i=Math.min(r-1,o);t.context_line=Ve(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>Ve(s,0))}function At(e){if(Is(e))return!0;try{b(e,"__sentry_captured__",!0)}catch{}return!1}function Is(e){try{return e.__sentry_captured__}catch{}}var mo=1e3;function se(){return Date.now()/mo}function As(){let{performance:e}=_;if(!e?.now)return se;let t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/mo}var R=As();function Mn(e){let t=R(),n={sid:A(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>xs(n)};return e&&ae(n,e),n}function ae(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||R(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:A()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Pn(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),ae(e,n)}function xs(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Re(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Re(r[o],t[o],n-1));return r}var kn="_sentrySpan";function Ne(e,t){t?b(e,kn,t):delete e[kn]}function Z(e){return e[kn]}function B(){return A()}function Q(){return A().substring(16)}var bs=100,D=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:B(),sampleRand:Math.random()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Ne(t,Z(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ae(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():F(n)?t:void 0,{tags:o,extra:i,user:s,contexts:a,level:c,fingerprint:u=[],propagationContext:f}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),c&&(this._level=c),u.length&&(this._fingerprint=u),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Ne(this,void 0),this._attachments=[],this.setPropagationContext({traceId:B(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:bs;if(r<=0)return this;let o={timestamp:se(),...t,message:t.message?Y(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Z(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Re(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||A();if(!this._client)return p.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||A();if(!this._client)return p.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||A();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(p.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Un(){return ye("defaultCurrentScope",()=>new D)}function Fn(){return ye("defaultIsolationScope",()=>new D)}var Ln=class{constructor(t,n){let r;t?r=t:r=new D;let o;n?o=n:o=new D,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return L(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function Ue(){let e=v(),t=Oe(e);return t.stack=t.stack||new Ln(Un(),Fn())}function Rs(e){return Ue().withScope(e)}function Ns(e,t){let n=Ue();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function go(e){return Ue().withScope(()=>e(Ue().getIsolationScope()))}function _o(){return{withIsolationScope:go,withScope:Rs,withSetScope:Ns,withSetIsolationScope:(e,t)=>go(t),getCurrentScope:()=>Ue().getScope(),getIsolationScope:()=>Ue().getIsolationScope()}}function W(e){let t=Oe(e);return t.acs?t.acs:_o()}function E(){let e=v();return W(e).getCurrentScope()}function y(){let e=v();return W(e).getIsolationScope()}function xt(){return ye("globalScope",()=>new D)}function $(...e){let t=v(),n=W(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function bt(...e){let t=v(),n=W(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function h(){return E().getClient()}function Rt(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||Q()};return r&&(i.parent_span_id=r),i}var O="sentry.source",Fe="sentry.sample_rate",Bn="sentry.previous_trace_sample_rate",M="sentry.op",N="sentry.origin";var Nt="sentry.measurement_unit",Ct="sentry.measurement_value",Le="sentry.custom_span_name",Be="sentry.profile_id",$e="sentry.exclusive_time";function $n(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function He(e,t){e.setAttribute("http.response.status_code",t);let n=$n(t);n.message!=="unknown_error"&&e.setStatus(n)}var ho="_sentryScope",So="_sentryIsolationScope";function Hn(e,t,n){e&&(b(e,So,n),b(e,ho,t))}function Ce(e){return{scope:e[ho],isolationScope:e[So]}}function ce(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var Ot="sentry-",To=/^sentry-/,yo=8192;function Xe(e){let t=Io(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(To)){let s=o.slice(Ot.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function Ze(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Ot}${r}`]=o),n),{});return Ao(t)}function Io(e){if(!(!e||!Ie(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=Eo(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):Eo(e)}function Eo(e){return e.split(",").map(t=>t.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function Ao(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>yo?(l&&p.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var vt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function xo(e){if(!e)return;let t=e.match(vt);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Gn(e,t){let n=xo(e),r=Xe(t);if(!n?.traceId)return{traceId:B(),sampleRand:Math.random()};let o=Cs(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function Qe(e=B(),t=Q(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Cs(e,t){let n=ce(t?.sample_rand);if(n!==void 0)return n;let r=ce(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}var Dt=0,Mt=1,bo=!1;function Co(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=I(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function tt(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:I(e).parent_span_id,i=Ce(e).scope,s=r?i?.getPropagationContext().propagationSpanId||Q():t;return{parent_span_id:o,span_id:s,trace_id:n}}function Pt(e){let{traceId:t,spanId:n}=e.spanContext(),r=pe(e);return Qe(t,n,r)}function kt(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===Mt,attributes:i,...o}))}function ue(e){return typeof e=="number"?Ro(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ro(e.getTime()):R()}function Ro(e){return e>9999999999?e/1e3:e}function I(e){if(vs(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(Os(e)){let{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:ue(o),timestamp:ue(s)||void 0,status:Ut(a),op:r[M],origin:r[N],links:kt(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Os(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function vs(e){return typeof e.getSpanJSON=="function"}function pe(e){let{traceFlags:t}=e.spanContext();return t===Mt}function Ut(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"unknown_error"}var et="_sentryChildSpans",jn="_sentryRootSpan";function Ft(e,t){let n=e[jn]||e;b(t,jn,n),e[et]?e[et].add(t):b(e,et,new Set([t]))}function Lt(e){let t=new Set;function n(r){if(!t.has(r)&&pe(r)){t.add(r);let o=r[et]?Array.from(r[et]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function C(e){return e[jn]||e}function J(){let e=v(),t=W(e);return t.getActiveSpan?t.getActiveSpan():Z(E())}function nt(){bo||(z(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),bo=!0)}function Oo(e,t){e.updateName(t),e.setAttributes({[O]:"custom",[Le]:t})}var rt="?",vo=/\(error: (.*)\)/,wo=/captureMessage|captureException/;function Ge(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];if(c.length>1024)continue;let u=vo.test(c)?c.replace(vo,"$1"):c;if(!u.match(/\S*Error: /)){for(let f of t){let d=f(u);if(d){i.push(d);break}}if(i.length>=50+o)break}}return Do(i.slice(o))}}function Yn(e){return Array.isArray(e)?Ge(...e):e}function Do(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Bt(t).function||"")&&t.pop(),t.reverse(),wo.test(Bt(t).function||"")&&(t.pop(),wo.test(Bt(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Bt(t).filename,function:n.function||rt}))}function Bt(e){return e[e.length-1]||{}}var zn="<anonymous>";function ot(e){try{return!e||typeof e!="function"?zn:e.name||zn}catch{return zn}}function je(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var $t={},Mo={};function de(e,t){$t[e]=$t[e]||[],$t[e].push(t)}function le(e,t){if(!Mo[e]){Mo[e]=!0;try{t()}catch(n){l&&p.error(`Error while instrumenting ${e}`,n)}}}function ee(e,t){let n=e&&$t[e];if(n)for(let r of n)try{r(t)}catch(o){l&&p.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ot(r)}
Error:`,o)}}var Wn=null;function Jn(e){let t="error";de(t,e),le(t,ws)}function ws(){Wn=_.onerror,_.onerror=function(e,t,n,r,o){return ee("error",{column:r,error:o,line:n,msg:e,url:t}),Wn?Wn.apply(this,arguments):!1},_.onerror.__SENTRY_INSTRUMENTED__=!0}var qn=null;function Vn(e){let t="unhandledrejection";de(t,e),le(t,Ds)}function Ds(){qn=_.onunhandledrejection,_.onunhandledrejection=function(e){return ee("unhandledrejection",e),qn?qn.apply(this,arguments):!0},_.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var Po=!1;function Xn(){Po||(Po=!0,Jn(Kn),Vn(Kn))}function Kn(){let e=J(),t=e&&C(e);if(t){let n="internal_error";l&&p.log(`[Tracing] Root span: ${n} -> Global error occurred`),t.setStatus({code:2,message:n})}}Kn.tag="sentry_tracingErrorCallback";function me(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||h()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}var ve="production";var ko="_frozenDsc";function it(e,t){b(e,ko,t)}function Zn(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||ve,release:n.release,public_key:r,trace_id:e};return t.emit("createDsc",o),o}function ze(e,t){let n=t.getPropagationContext();return n.dsc||Zn(n.traceId,e)}function w(e){let t=h();if(!t)return{};let n=C(e),r=I(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[Fe]??o[Bn];function a(S){return(typeof s=="number"||typeof s=="string")&&(S.sample_rate=`${s}`),S}let c=n[ko];if(c)return a(c);let u=i?.get("sentry.dsc"),f=u&&Xe(u);if(f)return a(f);let d=Zn(e.spanContext().traceId,t),g=o[O],m=r.description;return g!=="url"&&m&&(d.transaction=m),me()&&(d.sampled=String(pe(n)),d.sample_rand=i?.get("sentry.sample_rand")??Ce(n).scope?.getPropagationContext().sampleRand.toString()),a(d),t.emit("createDsc",d,n),d}function Uo(e){let t=w(e);return Ze(t)}var te=class{constructor(t={}){this._traceId=t.traceId||B(),this._spanId=t.spanId||Q()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Dt}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Ht(e,t,n=()=>{}){let r;try{r=e()}catch(o){throw t(o),n(),o}return Ms(r,t,n)}function Ms(e,t,n){return L(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function Qn(e){if(!l)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=I(e),{spanId:o}=e.spanContext(),i=pe(e),s=C(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:f,description:d}=I(s);u.push(`root ID: ${s.spanContext().spanId}`),f&&u.push(`root op: ${f}`),d&&u.push(`root description: ${d}`)}p.log(`${c}
  ${u.join(`
  `)}`)}function er(e){if(!l)return;let{description:t="< unknown name >",op:n="< unknown op >"}=I(e),{spanId:r}=e.spanContext(),i=C(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;p.log(s)}function tr(e,t,n){if(!me(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=ce(o);if(i===void 0)return l&&p.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return l&&p.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||l&&p.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Ps=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ks(e){return e==="http"||e==="https"}function H(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function nr(e){let t=Ps.exec(e);if(!t){z(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,f=u.split("/");if(f.length>1&&(c=f.slice(0,-1).join("/"),u=f.pop()),u){let d=u.match(/^\d+/);d&&(u=d[0])}return Fo({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function Fo(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Us(e){if(!l)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(p.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?ks(r)?t&&isNaN(parseInt(t,10))?(p.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(p.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(p.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Gt(e){let t=typeof e=="string"?nr(e):Fo(e);if(!(!t||!Us(t)))return t}function P(e,t=100,n=1/0){try{return rr("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function jt(e,t=3,n=100*1024){let r=P(e,t);return $s(r)>n?jt(e,t-1,n):r}function rr(e,t,n=1/0,r=1/0,o=Hs()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=Fs(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let m=u.toJSON();return rr("",m,c-1,r,o)}catch{}let f=Array.isArray(t)?[]:{},d=0,g=It(t);for(let m in g){if(!Object.prototype.hasOwnProperty.call(g,m))continue;if(d>=r){f[m]="[MaxProperties ~]";break}let S=g[m];f[m]=rr(m,S,c-1,r,o),d++}return s(t),f}function Fs(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(qe(t))return"[VueViewModel]";if(Rn(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${ot(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=Ls(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Ls(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function Bs(e){return~-encodeURI(e).split(/%..|./).length}function $s(e){return Bs(JSON.stringify(e))}function Hs(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function U(e,t=[]){return[e,t]}function ir(e,t){let[n,r]=e;return[n,[...r,t]]}function ge(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function or(e){let t=Oe(_);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function sr(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[or(r),i]:r.push(typeof i=="string"?or(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(P(a))}o(c)}}return typeof r=="string"?r:Gs(r)}function Gs(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function ar(e){return[{type:"span"},e]}function cr(e){let t=typeof e.data=="string"?or(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var js={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function zt(e){return js[e]}function Yt(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function ur(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:H(r)},...o&&{trace:o}}}function zs(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function pr(e,t,n,r){let o=Yt(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:H(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return U(i,[s])}function fr(e,t,n,r){let o=Yt(n),i=e.type&&e.type!=="replay_event"?e.type:"event";zs(e,n?.sdk);let s=ur(e,o,r,t);return delete e.sdkProcessingMetadata,U(s,[[{type:i},e]])}function dr(e,t){function n(f){return!!f.trace_id&&!!f.public_key}let r=w(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:H(o)}},a=t?.getOptions().beforeSendSpan,c=a?f=>{let d=I(f),g=a(d);return g||(nt(),d)}:I,u=[];for(let f of e){let d=c(f);d&&u.push(ar(d))}return U(s,u)}function Lo(e,t,n,r=J()){let o=r&&C(r);o&&(l&&p.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[Ct]:t,[Nt]:n}))}function Wt(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[Nt],i=r[Ct];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var Bo=1e3,we=class{constructor(t={}){this._traceId=t.traceId||B(),this._spanId=t.spanId||Q(),this._startTime=t.startTimestamp||R(),this._links=t.links,this._attributes={},this.setAttributes({[N]:"manual",[M]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Mt:Dt}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=ue(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(O,"custom"),this}end(t){this._endTime||(this._endTime=ue(t),er(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[M],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Ut(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[N],profile_id:this._attributes[Be],exclusive_time:this._attributes[$e],measurements:Wt(this._events),is_segment:this._isStandaloneSpan&&C(this)===this||void 0,segment_id:this._isStandaloneSpan?C(this).spanContext().spanId:void 0,links:kt(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){l&&p.log("[Tracing] Adding an event to span:",t);let o=$o(n)?n:r||R(),i=$o(n)?{}:n||{},s={name:t,time:ue(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=h();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===C(this)))return;if(this._isStandaloneSpan){this._sampled?Ws(dr([this],t)):(l&&p.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(Ce(this).scope||E()).captureEvent(r)}_convertSpanToTransaction(){if(!Ho(I(this)))return;this._name||(l&&p.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=Ce(this);if(this._sampled!==!0)return;let o=Lt(this).filter(u=>u!==this&&!Ys(u)).map(u=>I(u)).filter(Ho),i=this._attributes[O];delete this._attributes[Le],o.forEach(u=>{delete u.data[Le]});let s={contexts:{trace:Co(this)},spans:o.length>Bo?o.sort((u,f)=>u.start_timestamp-f.start_timestamp).slice(0,Bo):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:w(this)},...i&&{transaction_info:{source:i}}},a=Wt(this._events);return a&&Object.keys(a).length&&(l&&p.log("[Measurements] Adding measurements to transaction event",JSON.stringify(a,void 0,2)),s.measurements=a),s}};function $o(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Ho(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Ys(e){return e instanceof we&&e.isStandaloneSpan()}function Ws(e){let t=h();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}var lr="__SENTRY_SUPPRESS_TRACING__";function _e(e,t){let n=st();if(n.startSpan)return n.startSpan(e,t);let r=_r(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return $(a,()=>Yo(i)(()=>{let u=E(),f=hr(u),g=e.onlyIfParent&&!f?new te:gr({parentSpan:f,spanArguments:r,forceTransaction:o,scope:u});return Ne(u,g),Ht(()=>t(g),()=>{let{status:m}=I(g);g.isRecording()&&(!m||m==="ok")&&g.setStatus({code:2,message:"internal_error"})},()=>{g.end()})}))}function mr(e,t){let n=st();if(n.startSpanManual)return n.startSpanManual(e,t);let r=_r(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return $(a,()=>Yo(i)(()=>{let u=E(),f=hr(u),g=e.onlyIfParent&&!f?new te:gr({parentSpan:f,spanArguments:r,forceTransaction:o,scope:u});return Ne(u,g),Ht(()=>t(g,()=>g.end()),()=>{let{status:m}=I(g);g.isRecording()&&(!m||m==="ok")&&g.setStatus({code:2,message:"internal_error"})})}))}function Jt(e){let t=st();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=_r(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>$(e.scope,s):o!==void 0?s=>Ye(o,s):s=>s())(()=>{let s=E(),a=hr(s);return e.onlyIfParent&&!a?new te:gr({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var jo=(e,t)=>{let n=v(),r=W(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e;return $(s=>{let a=Gn(o,i);return s.setPropagationContext(a),t()})};function Ye(e,t){let n=st();return n.withActiveSpan?n.withActiveSpan(e,t):$(r=>(Ne(r,e||void 0),t(r)))}function qt(e){let t=st();return t.suppressTracing?t.suppressTracing(e):$(n=>(n.setSDKProcessingMetadata({[lr]:!0}),e()))}function zo(e){return $(t=>(t.setPropagationContext({traceId:B(),sampleRand:Math.random()}),l&&p.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Ye(null,e)))}function gr({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!me()){let s=new te;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...w(s)};it(s,a)}return s}let o=y(),i;if(e&&!n)i=Js(e,r,t),Ft(e,i);else if(e){let s=w(e),{traceId:a,spanId:c}=e.spanContext(),u=pe(e);i=Go({traceId:a,parentSpanId:c,...t},r,u),it(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=Go({traceId:s,parentSpanId:c,...t},r,u),a&&it(i,a)}return Qn(i),Hn(i,r,o),i}function _r(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=ue(e.startTime),delete r.startTime,r}return n}function st(){let e=v();return W(e)}function Go(e,t,n){let r=h(),o=r?.getOptions()||{},{name:i=""}=e,s={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let a=s.parentSampled??n,c=s.spanAttributes,u=t.getPropagationContext(),[f,d,g]=t.getScopeData().sdkProcessingMetadata[lr]?[!1]:tr(o,{name:i,parentSampled:a,attributes:c,parentSampleRate:ce(u.dsc?.sample_rate)},u.sampleRand),m=new we({...e,attributes:{[O]:"custom",[Fe]:d!==void 0&&g?d:void 0,...c},sampled:f});return!f&&r&&(l&&p.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",m),m}function Js(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[lr]?!1:pe(e),s=i?new we({...n,parentSpanId:r,traceId:o,sampled:i}):new te({traceId:o});Ft(e,s);let a=h();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function hr(e){let t=Z(e);if(!t)return;let n=h();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?C(t):t}function Yo(e){return e!==void 0?t=>Ye(e,t):t=>t()}var he;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(he||(he={}));function q(e){return new ne(t=>{t(e)})}function De(e){return new ne((t,n)=>{n(e)})}var ne=class e{constructor(t){this._state=he.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===he.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===he.RESOLVED&&n[1](this._value),this._state===he.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===he.PENDING){if(L(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(he.RESOLVED,i)},o=i=>{n(he.REJECTED,i)};try{t(r,o)}catch(i){o(i)}}};function at(e,t,n,r=0){return new ne((o,i)=>{let s=e[r];if(t===null||typeof s!="function")o(t);else{let a=s({...t},n);l&&s.id&&a===null&&p.log(`Event processor "${s.id}" dropped event`),L(a)?a.then(c=>at(e,c,n,r+1).then(o)).then(null,i):at(e,a,n,r+1).then(o).then(null,i)}})}var Vt,Wo,Kt;function Sr(e){let t=_._sentryDebugIds;if(!t)return{};let n=Object.keys(t);return Kt&&n.length===Wo||(Wo=n.length,Kt=n.reduce((r,o)=>{Vt||(Vt={});let i=Vt[o];if(i)r[i[0]]=i[1];else{let s=e(o);for(let a=s.length-1;a>=0;a--){let u=s[a]?.filename,f=t[o];if(u&&f){r[u]=f,Vt[o]=[u,f];break}}}return r},{})),Kt}function Er(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;Vs(e,t),r&&Zs(e,r),Qs(e,n),Ks(e,o),Xs(e,i)}function Zt(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:f,attachments:d,propagationContext:g,transactionName:m,span:S}=t;Xt(e,"extra",n),Xt(e,"tags",r),Xt(e,"user",o),Xt(e,"contexts",i),e.sdkProcessingMetadata=Re(e.sdkProcessingMetadata,a,2),s&&(e.level=s),m&&(e.transactionName=m),S&&(e.span=S),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),f.length&&(e.eventProcessors=[...e.eventProcessors,...f]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...g}}function Xt(e,t,n){e[t]=Re(e[t],n,1)}function Vs(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function Ks(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Xs(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Zs(e,t){e.contexts={trace:tt(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:w(t),...e.sdkProcessingMetadata};let n=C(t),r=I(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function Qs(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function Tr(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||A(),timestamp:t.timestamp||se()},u=n.integrations||e.integrations.map(T=>T.name);ea(c,e),ra(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&ta(c,e.stackParser);let f=ia(r,n.captureContext);n.mechanism&&be(c,n.mechanism);let d=o?o.getEventProcessors():[],g=xt().getScopeData();if(i){let T=i.getScopeData();Zt(g,T)}if(f){let T=f.getScopeData();Zt(g,T)}let m=[...n.attachments||[],...g.attachments];m.length&&(n.attachments=m),Er(c,g);let S=[...d,...g.eventProcessors];return at(S,c,n).then(T=>(T&&na(T),typeof s=="number"&&s>0?oa(T,s,a):T))}function ea(e,t){let{environment:n,release:r,dist:o,maxValueLength:i=250}=t;e.environment=e.environment||n||ve,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);let s=e.request;s?.url&&(s.url=Y(s.url,i))}function ta(e,t){let n=Sr(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function na(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function ra(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function oa(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:P(o.data,t,n)}}))},...e.user&&{user:P(e.user,t,n)},...e.contexts&&{contexts:P(e.contexts,t,n)},...e.extra&&{extra:P(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=P(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:P(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=P(e.contexts.flags,3,n)),r}function ia(e,t){if(!t)return e;let n=e?e.clone():new D;return n.update(t),n}function Jo(e){if(e)return sa(e)?{captureContext:e}:ca(e)?{captureContext:e}:e}function sa(e){return e instanceof D||typeof e=="function"}var aa=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function ca(e){return Object.keys(e).some(t=>aa.includes(t))}function Se(e,t){return E().captureException(e,Jo(t))}function ct(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return E().captureMessage(e,n,r)}function ut(e,t){return E().captureEvent(e,t)}function qo(e,t){y().setContext(e,t)}function Vo(e){y().setExtras(e)}function Ko(e,t){y().setExtra(e,t)}function Xo(e){y().setTags(e)}function Zo(e,t){y().setTag(e,t)}function Qo(e){y().setUser(e)}function ei(){return y().lastEventId()}function Qt(e,t){let n=E(),r=h();if(!r)l&&p.warn("Cannot capture check-in. No client defined.");else if(!r.captureCheckIn)l&&p.warn("Cannot capture check-in. Client does not support sending check-ins.");else return r.captureCheckIn(e,t,n);return A()}function en(e,t,n){let r=Qt({monitorSlug:e,status:"in_progress"},n),o=R();function i(s){Qt({monitorSlug:e,status:s,checkInId:r,duration:R()-o})}return bt(()=>{let s;try{s=t()}catch(a){throw i("error"),a}return L(s)?Promise.resolve(s).then(()=>{i("ok")},a=>{throw i("error"),a}):i("ok"),s})}async function pt(e){let t=h();return t?t.flush(e):(l&&p.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function ti(e){let t=h();return t?t.close(e):(l&&p.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function ni(){return!!h()}function yr(){let e=h();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function ri(e){y().addEventProcessor(e)}function oi(e){let t=y(),n=E(),{userAgent:r}=_.navigator||{},o=Mn({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&ae(i,{status:"exited"}),tn(),t.setSession(o),o}function tn(){let e=y(),n=E().getSession()||e.getSession();n&&Pn(n),ii(),e.setSession()}function ii(){let e=y(),t=h(),n=e.getSession();n&&t&&t.captureSession(n)}function si(e=!1){if(e){tn();return}ii()}var ua="7";function pa(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function fa(e){return`${pa(e)}${e.projectId}/envelope/`}function da(e,t){let n={sentry_version:ua};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function nn(e,t,n){return t||`${fa(e)}?${da(e,n)}`}var ai=[];function la(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Ir(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return la(r)}function ci(e,t){let n={};return t.forEach(r=>{r&&xr(e,r,n)}),n}function Ar(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function xr(e,t,n){if(n[t.name]){l&&p.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,ai.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),ai.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}l&&p.log(`Integration installed: ${t.name}`)}function rn(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function ui(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[Be],exclusive_time:s?.[$e],measurements:e.measurements,is_segment:!0}}function pi(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Be]:e.profile_id},...e.exclusive_time&&{[$e]:e.exclusive_time}}}},measurements:e.measurements}}function br(e,t,n){let r=[{type:"client_report"},{timestamp:n||se(),discarded_events:e}];return U(t?{dsn:t}:{},[r])}var fi="Not capturing exception because it's already been captured.",di="Discarded session because of missing or non-string release",gi=Symbol.for("SentryInternalError"),_i=Symbol.for("SentryDoNotSendEventError");function on(e){return{message:e,[gi]:!0}}function Rr(e){return{message:e,[_i]:!0}}function li(e){return!!e&&typeof e=="object"&&gi in e}function mi(e){return!!e&&typeof e=="object"&&_i in e}var ft=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Gt(t.dsn):l&&p.warn("No DSN provided, client will not send events."),this._dsn){let n=nn(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){let o=A();if(At(t))return l&&p.log(fi),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:A(),...r},s=Ae(t)?t:String(t),a=xe(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=A();if(n?.originalException&&At(n.originalException))return l&&p.log(fi),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,c)),i.event_id}captureSession(t){this.sendSession(t),ae(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(o=>r&&o))):q(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];xr(this,t,this._integrations),n||Ar(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=fr(t,this._dsn,this._options._metadata,this._options.tunnel);for(let i of n.attachments||[])r=ir(r,cr(i));let o=this.sendEnvelope(r);o&&o.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){let{release:n,environment:r=ve}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){l&&p.warn(di);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){l&&p.warn(di);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=pr(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;l&&p.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{let o=r.indexOf(n);o>-1&&r.splice(o,1)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(l&&p.error("Error while sending envelope:",n),n)):(l&&p.error("Transport disabled"),q({}))}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=ci(this,t),Ar(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(ae(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new ne(n=>{let r=0,o=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=o,t&&r>=t&&(clearInterval(i),n(!1)))},o)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),Tr(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Rt(r),...a.contexts};let c=ze(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=E(),o=y()){return l&&Nr(t)&&p.log(`Captured error event \`${rn(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{l&&(mi(i)?p.log(i.message):li(i)?p.warn(i.message):p.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=hi(t),c=Nr(t),u=t.type||"error",f=`before send for type \`${u}\``,d=typeof s>"u"?void 0:ce(s);if(c&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),De(Rr(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let g=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,o).then(m=>{if(m===null)throw this.recordDroppedEvent("event_processor",g),Rr("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return m;let V=ga(this,i,m,n);return ma(V,f)}).then(m=>{if(m===null){if(this.recordDroppedEvent("before_send",g),a){let oe=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",oe)}throw Rr(`${f} returned \`null\`, will not send event.`)}let S=r.getSession()||o.getSession();if(c&&S&&this._updateSessionFromEvent(S,m),a){let T=m.sdkProcessingMetadata?.spanCountBeforeProcessing||0,oe=m.spans?m.spans.length:0,Te=T-oe;Te>0&&this.recordDroppedEvent("before_send","span",Te)}let V=m.transaction_info;if(a&&V&&m.transaction!==t.transaction){let T="custom";m.transaction_info={...V,source:T}}return this.sendEvent(m,n),m}).then(null,m=>{throw mi(m)||li(m)?m:(this.captureException(m,{data:{__sentry__:!0},originalException:m}),on(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${m}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){l&&p.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){l&&p.log("No outcomes to send");return}if(!this._dsn){l&&p.log("No dsn provided, will not send outcomes");return}l&&p.log("Sending outcomes:",t);let n=br(t,this._options.tunnel&&H(this._dsn));this.sendEnvelope(n)}};function ma(e,t){let n=`${t} must return \`null\` or a valid event.`;if(L(e))return e.then(r=>{if(!F(r)&&r!==null)throw on(n);return r},r=>{throw on(`${t} rejected with ${r}`)});if(!F(e)&&e!==null)throw on(n);return e}function ga(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t,a=n;if(Nr(a)&&o)return o(a,r);if(hi(a)){if(s){let c=s(ui(a));if(c?a=Re(n,pi(c)):nt(),a.spans){let u=[];for(let f of a.spans){let d=s(f);d?u.push(d):(nt(),u.push(f))}a.spans=u}}if(i){if(a.spans){let c=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return i(a,r)}}return a}function Nr(e){return e.type===void 0}function hi(e){return e.type==="transaction"}function sn(e,t){if(!t)return[void 0,void 0];let n=Z(t),r=n?tt(n):Rt(t);return[n?w(n):ze(e,t),r]}function Cr(e,t,n,r,o){let i={sent_at:new Date().toISOString()};n?.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&o&&(i.dsn=H(o)),t&&(i.trace=t);let s=_a(e);return U(i,[s])}function _a(e){return[{type:"check_in"},e]}var Si={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function ha(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Ei(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=H(r)),U(o,[ha(e)])}var Sa=100;_._sentryClientToLogBufferMap=new WeakMap;function Ea(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function an(e,t=h(),n=E()){if(!t){l&&p.warn("No client available to capture log.");return}let{_experiments:r,release:o,environment:i}=t.getOptions(),{enableLogs:s=!1,beforeSendLog:a}=r??{};if(!s){l&&p.warn("logging option not enabled, log will not be captured.");return}let[,c]=sn(t,n),u={...e.attributes};o&&(u["sentry.release"]=o),i&&(u["sentry.environment"]=i);let{sdk:f}=t.getSdkMetadata()??{};f&&(u["sentry.sdk.name"]=f.name,u["sentry.sdk.version"]=f.version);let d=e.message;if(Ae(d)){let{__sentry_template_string__:Et,__sentry_template_values__:Tt=[]}=d;u["sentry.message.template"]=Et,Tt.forEach((ls,ms)=>{u[`sentry.message.parameter.${ms}`]=ls})}let g=Z(n);g&&(u["sentry.trace.parent_span_id"]=g.spanContext().spanId);let m={...e,attributes:u};t.emit("beforeCaptureLog",m);let S=a?a(m):m;if(!S){t.recordDroppedEvent("before_send","log_item",1),l&&p.warn("beforeSendLog returned null, log will not be captured.");return}let{level:V,message:T,attributes:oe={},severityNumber:Te}=S,so={timestamp:R(),level:V,body:T,trace_id:c?.trace_id,severity_number:Te??Si[V],attributes:Object.keys(oe).reduce((Et,Tt)=>(Et[Tt]=Ea(oe[Tt]),Et),{})},St=Ti(t);St===void 0?_._sentryClientToLogBufferMap?.set(t,[so]):(_._sentryClientToLogBufferMap?.set(t,[...St,so]),St.length>=Sa&&We(t,St)),t.emit("afterCaptureLog",S)}function We(e,t){let n=t??Ti(e)??[];if(n.length===0)return;let r=e.getOptions(),o=Ei(n,r._metadata,r.tunnel,e.getDsn());_._sentryClientToLogBufferMap?.set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function Ti(e){return _._sentryClientToLogBufferMap?.get(e)}function Or(e,t){return e(t.stack||"",1)}function cn(e,t){let n={type:t.name||t.constructor.name,value:t.message},r=Or(e,t);return r.length&&(n.stacktrace={frames:r}),n}function Ta(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}function ya(e){if("name"in e&&typeof e.name=="string"){let r=`'${e.name}' captured as exception`;return"message"in e&&typeof e.message=="string"&&(r+=` with message '${e.message}'`),r}else if("message"in e&&typeof e.message=="string")return e.message;let t=vn(e);if(In(e))return`Event \`ErrorEvent\` captured as exception with message \`${e.message}\``;let n=Ia(e);return`${n&&n!=="Object"?`'${n}'`:"Object"} captured as exception with keys: ${t}`}function Ia(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Aa(e,t,n,r){if(k(n))return[n,void 0];if(t.synthetic=!0,F(n)){let i=e?.getOptions().normalizeDepth,s={__serialized__:jt(n,i)},a=Ta(n);if(a)return[a,s];let c=ya(n),u=r?.syntheticException||new Error(c);return u.message=c,[u,s]}let o=r?.syntheticException||new Error(n);return o.message=`${n}`,[o,void 0]}function Je(e,t,n,r){let i=r?.data&&r.data.mechanism||{handled:!0,type:"generic"},[s,a]=Aa(e,i,n,r),c={exception:{values:[cn(t,s)]}};return a&&(c.extra=a),wn(c,void 0,void 0),be(c,i),{...c,event_id:r?.event_id}}function vr(e,t,n="info",r,o){let i={event_id:r?.event_id,level:n};if(o&&r?.syntheticException){let s=Or(e,r.syntheticException);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]},be(i,{synthetic:!0}))}if(Ae(t)){let{__sentry_template_string__:s,__sentry_template_values__:a}=t;return i.logentry={message:s,params:a},i}return i.message=t,i}var xa=5e3,dt=class extends ft{constructor(t){if(Xn(),super(t),this._logWeight=0,this._options._experiments?.enableLogs){let n=this;n.on("flushLogs",()=>{n._logWeight=0,clearTimeout(n._logFlushIdleTimeout)}),n.on("afterCaptureLog",r=>{n._logWeight+=ba(r),n._logWeight>=8e5?We(n):n._logFlushIdleTimeout=setTimeout(()=>{We(n)},xa)}),n.on("flush",()=>{We(n)})}}eventFromException(t,n){let r=Je(this,this._options.stackParser,t,n);return r.level="error",q(r)}eventFromMessage(t,n="info",r){return q(vr(this._options.stackParser,t,n,r,this._options.attachStacktrace))}captureException(t,n,r){return yi(n),super.captureException(t,n,r)}captureEvent(t,n,r){return!t.type&&t.exception?.values&&t.exception.values.length>0&&yi(n),super.captureEvent(t,n,r)}captureCheckIn(t,n,r){let o="checkInId"in t&&t.checkInId?t.checkInId:A();if(!this._isEnabled())return l&&p.warn("SDK not enabled, will not capture check-in."),o;let i=this.getOptions(),{release:s,environment:a,tunnel:c}=i,u={check_in_id:o,monitor_slug:t.monitorSlug,status:t.status,release:s,environment:a};"duration"in t&&(u.duration=t.duration),n&&(u.monitor_config={schedule:n.schedule,checkin_margin:n.checkinMargin,max_runtime:n.maxRuntime,timezone:n.timezone,failure_issue_threshold:n.failureIssueThreshold,recovery_threshold:n.recoveryThreshold});let[f,d]=sn(this,r);d&&(u.contexts={trace:d});let g=Cr(u,f,this.getSdkMetadata(),c,this.getDsn());return l&&p.info("Sending checkin:",t.monitorSlug,t.status),this.sendEnvelope(g),o}_prepareEvent(t,n,r,o){return this._options.platform&&(t.platform=t.platform||this._options.platform),this._options.runtime&&(t.contexts={...t.contexts,runtime:t.contexts?.runtime||this._options.runtime}),this._options.serverName&&(t.server_name=t.server_name||this._options.serverName),super._prepareEvent(t,n,r,o)}};function yi(e){let t=y().getScopeData().sdkProcessingMetadata.requestSession;if(t){let n=e?.mechanism?.handled??!0;n&&t.status!=="crashed"?t.status="errored":n||(t.status="crashed")}}function ba(e){let t=0;return e.message&&(t+=e.message.length*2),e.attributes&&Object.values(e.attributes).forEach(n=>{Array.isArray(n)?t+=n.length*Ii(n[0]):xe(n)?t+=Ii(n):t+=100}),t}function Ii(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function wr(e,t){t.debug===!0&&(l?p.enable():z(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),E().update(t.initialScope);let r=new e(t);return Dr(r),r.init(),r}function Dr(e){E().setClient(e)}var un=Symbol.for("SentryBufferFullError");function Mr(e){let t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]||Promise.resolve(void 0)}function o(s){if(!n())return De(un);let a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(s){return new ne((a,c)=>{let u=t.length;if(!u)return a(!0);let f=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(d=>{q(d).then(()=>{--u||(clearTimeout(f),a(!0))},c)})})}return{$:t,add:o,drain:i}}function Pr(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Ai(e,t){return e[t]||e.all||0}function kr(e,t,n=Date.now()){return Ai(e,t)>n}function Ur(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,f]=a.split(":",5),d=parseInt(c,10),g=(isNaN(d)?60:d)*1e3;if(!u)o.all=r+g;else for(let m of u.split(";"))m==="metric_bucket"?(!f||f.split(";").includes("custom"))&&(o[m]=r+g):o[m]=r+g}else s?o.all=r+Pr(s,r):t===429&&(o.all=r+60*1e3);return o}var Ra=64;function pn(e,t,n=Mr(e.bufferSize||Ra)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(ge(s,(d,g)=>{let m=zt(g);kr(r,m)?e.recordDroppedEvent("ratelimit_backoff",m):a.push(d)}),a.length===0)return q({});let c=U(s[0],a),u=d=>{ge(c,(g,m)=>{e.recordDroppedEvent(d,zt(m))})},f=()=>t({body:sr(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&l&&p.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=Ur(r,d),d),d=>{throw u("network_error"),l&&p.error("Encountered error running transport request:",d),d});return n.add(f).then(d=>d,d=>{if(d===un)return l&&p.error("Skipped sending event because buffer is full."),u("queue_overflow"),q({});throw d})}return{send:i,flush:o}}function lt(e={}){let t=h();if(!yr()||!t)return{};let n=v(),r=W(n);if(r.getTraceData)return r.getTraceData(e);let o=E(),i=e.span||J(),s=i?Pt(i):Ca(o),a=i?w(i):ze(t,o),c=Ze(a);return vt.test(s)?{"sentry-trace":s,baggage:c}:(p.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function Ca(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Qe(t,r,n)}function xi(){return Object.entries(lt()).map(([e,t])=>`<meta name="${e}" content="${t}"/>`).join(`
`)}var Oa=100;function re(e,t){let n=h(),r=y();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Oa}=n.getOptions();if(i<=0)return;let a={timestamp:se(),...e},c=o?z(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var bi,va="FunctionToString",Ri=new WeakMap,wa=()=>({name:va,setupOnce(){bi=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=On(this),n=Ri.has(h())&&t!==void 0?t:this;return bi.apply(n,e)}}catch{}},setup(e){Ri.set(e,!0)}}),fn=wa;var Da=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Ma="EventFilters",Fr=(e={})=>{let t;return{name:Ma,setup(n){let r=n.getOptions();t=Ni(e,r)},processEvent(n,r,o){if(!t){let i=o.getOptions();t=Ni(e,i)}return Pa(n,t)?null:n}}},ln=(e={})=>({...Fr(e),name:"InboundFilters"});function Ni(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Da],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Pa(e,t){if(e.type){if(e.type==="transaction"&&Ua(e,t.ignoreTransactions))return l&&p.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ie(e)}`),!0}else{if(ka(e,t.ignoreErrors))return l&&p.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ie(e)}`),!0;if($a(e))return l&&p.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${ie(e)}`),!0;if(Fa(e,t.denyUrls))return l&&p.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ie(e)}.
Url: ${dn(e)}`),!0;if(!La(e,t.allowUrls))return l&&p.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ie(e)}.
Url: ${dn(e)}`),!0}return!1}function ka(e,t){return t?.length?rn(e).some(n=>ke(n,t)):!1}function Ua(e,t){if(!t?.length)return!1;let n=e.transaction;return n?ke(n,t):!1}function Fa(e,t){if(!t?.length)return!1;let n=dn(e);return n?ke(n,t):!1}function La(e,t){if(!t?.length)return!0;let n=dn(e);return n?ke(n,t):!0}function Ba(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function dn(e){try{let n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?Ba(n):null}catch{return l&&p.error(`Cannot extract url for event ${ie(e)}`),null}}function $a(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function Br(e,t,n,r,o,i){if(!o.exception?.values||!i||!j(i.originalException,Error))return;let s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Lr(e,t,r,i.originalException,n,o.exception.values,s,0))}function Lr(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(j(r[o],Error)){Ci(s,a);let u=e(t,r[o]),f=c.length;Oi(u,o,f,a),c=Lr(e,t,n,r[o],o,[u,...c],u,f)}return Array.isArray(r.errors)&&r.errors.forEach((u,f)=>{if(j(u,Error)){Ci(s,a);let d=e(t,u),g=c.length;Oi(d,`errors[${f}]`,g,a),c=Lr(e,t,n,u,o,[d,...c],d,g)}}),c}function Ci(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Oi(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}var Ha="cause",Ga=5,ja="LinkedErrors",za=(e={})=>{let t=e.limit||Ga,n=e.key||Ha;return{name:ja,preprocessEvent(r,o,i){let s=i.getOptions();Br(cn,s.stackParser,n,t,r,o)}}},mn=za;var wi=new Map,vi=new Set;function Ya(e){if(_._sentryModuleMetadata)for(let t of Object.keys(_._sentryModuleMetadata)){let n=_._sentryModuleMetadata[t];if(vi.has(t))continue;vi.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){wi.set(o.filename,n);break}}}function Wa(e,t){return Ya(e),wi.get(t)}function gn(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(let r of n.stacktrace.frames||[]){if(!r.filename||r.module_metadata)continue;let o=Wa(e,r.filename);o&&(r.module_metadata=o)}})}catch{}}function _n(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(let n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}var Ja=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{ge(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&(_n(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;gn(n,t)})}});function Di(e){let t={},n=0;for(;n<e.length;){let r=e.indexOf("=",n);if(r===-1)break;let o=e.indexOf(";",n);if(o===-1)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}let i=e.slice(n,r).trim();if(t[i]===void 0){let s=e.slice(r+1,o).trim();s.charCodeAt(0)===34&&(s=s.slice(1,-1));try{t[i]=s.indexOf("%")!==-1?decodeURIComponent(s):s}catch{t[i]=s}}n=o+1}return t}var $r=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"];function Mi(e){return $r.map(o=>{let i=e[o],s=Array.isArray(i)?i.join(";"):i;return o==="Forwarded"?qa(s):s?.split(",").map(a=>a.trim())}).reduce((o,i)=>i?o.concat(i):o,[]).find(o=>o!==null&&Va(o))||null}function qa(e){if(!e)return null;for(let t of e.split(";"))if(t.startsWith("for="))return t.slice(4);return null}function Va(e){return/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(e)}var Ka={cookies:!0,data:!0,headers:!0,query_string:!0,url:!0},Xa="RequestData",Za=(e={})=>{let t={...Ka,...e.include};return{name:Xa,processEvent(n,r,o){let{sdkProcessingMetadata:i={}}=n,{normalizedRequest:s,ipAddress:a}=i,c={...t,ip:t.ip??o.getOptions().sendDefaultPii};return s&&Qa(n,s,{ipAddress:a},c),n}}},Pi=Za;function Qa(e,t,n,r){if(e.request={...e.request,...ec(t,r)},r.ip){let o=t.headers&&Mi(t.headers)||n.ipAddress;o&&(e.user={...e.user,ip_address:o})}}function ec(e,t){let n={},r={...e.headers};if(t.headers&&(n.headers=r,t.cookies||delete r.cookie,t.ip||$r.forEach(o=>{delete r[o]})),n.method=e.method,t.url&&(n.url=e.url),t.cookies){let o=e.cookies||(r?.cookie?Di(r.cookie):void 0);n.cookies=o||{}}return t.query_string&&(n.query_string=e.query_string),t.data&&(n.data=e.data),n}function Ee(e){let t="console";de(t,e),le(t,tc)}function tc(){"console"in _&&K.forEach(function(e){e in _.console&&Ke(_.console,e,function(t){return Pe[e]=t,function(...n){ee("console",{args:n,level:e}),Pe[e]?.apply(_.console,n)}})})}function Me(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var nc="CaptureConsole",rc=(e={})=>{let t=e.levels||K,n=e.handled??!0;return{name:nc,setup(r){"console"in _&&Ee(({args:o,level:i})=>{h()!==r||!t.includes(i)||oc(o,i,n)})}}},ki=rc;function oc(e,t,n){let r={level:Me(t),extra:{arguments:e}};$(o=>{if(o.addEventProcessor(a=>(a.logger="console",be(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){let a=`Assertion failed: ${X(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),ct(a,r)}return}let i=e.find(a=>a instanceof Error);if(i){Se(i,r);return}let s=X(e," ");ct(s,r)})}var ic="Dedupe",sc=()=>{let e;return{name:ic,processEvent(t){if(t.type)return t;try{if(ac(t,e))return l&&p.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},hn=sc;function ac(e,t){return t?!!(cc(e,t)||uc(e,t)):!1}function cc(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Li(e,t)||!Fi(e,t))}function uc(e,t){let n=Ui(t),r=Ui(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Li(e,t)||!Fi(e,t))}function Fi(e,t){let n=je(e),r=je(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function Li(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Ui(e){return e.exception?.values&&e.exception.values[0]}var pc="ExtraErrorData",fc=(e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:pc,processEvent(r,o,i){let{maxValueLength:s=250}=i.getOptions();return dc(r,o,t,n,s)}}},Bi=fc;function dc(e,t={},n,r,o){if(!t.originalException||!k(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=lc(t.originalException,r,o);if(s){let a={...e.contexts},c=P(s,n);return F(c)&&(b(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function lc(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=k(s)||typeof s=="string"?Y(`${s}`,n):s}if(t&&e.cause!==void 0&&(o.cause=k(e.cause)?e.cause.toString():e.cause),typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=k(a)?a.toString():a}}return o}catch(r){l&&p.error("Unable to extract extra data from the Error object:",r)}return null}function mc(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var gc=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Hi(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=gc.exec(t);return n?n.slice(1):[]}function Hr(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=mc(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function $i(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Gr(e,t){e=Hr(e).slice(1),t=Hr(t).slice(1);let n=$i(e.split("/")),r=$i(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function jr(e){let t=Hi(e),n=t[0]||"",r=t[1];return!n&&!r?".":(r&&(r=r.slice(0,r.length-1)),n+r)}function zr(e,t){let n=Hi(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var _c="RewriteFrames",Gi=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in _&&!!_.window,o=e.iteratee||hc({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames&&a.frames.map(c=>o(c))}}return{name:_c,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function hc({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Gr(t,s):zr(s);r.filename=`${n}${a}`}return r}}var Sc=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],Ec=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],Tc={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},zi=["select","insert","upsert","update","delete"];function Sn(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function En(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function yc(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Ic(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;let[n,...r]=t.split("."),o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&Tc[n]||"filter",`${o}(${e}, ${r.join(".")})`}function ji(e,t=!1){return new Proxy(e,{apply(n,r,o){return _e({name:e.name,attributes:{[N]:"auto.db.supabase",[M]:`db.auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,o).then(s=>(s&&typeof s=="object"&&"error"in s&&s.error?(i.setStatus({code:2}),Se(s.error,{mechanism:{handled:!1}})):i.setStatus({code:1}),i.end(),s)).catch(s=>{throw i.setStatus({code:2}),i.end(),Se(s,{mechanism:{handled:!1}}),s}).then(...o))}})}function Ac(e){let t=e.auth;if(!(!t||En(e.auth))){for(let n of Sc){let r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=ji(r))}for(let n of Ec){let r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=ji(r,!0))}Sn(e.auth)}}function xc(e){En(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){let o=Reflect.apply(t,n,r),i=o.constructor;return Rc(i),o}}),Sn(e.prototype.from))}function bc(e){En(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){let o=zi,i=n,s=yc(i.method,i.headers);if(!o.includes(s)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);let a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=`from(${c})`,f=[];for(let[m,S]of i.url.searchParams.entries())f.push(Ic(m,S));let d=Object.create(null);if(F(i.body))for(let[m,S]of Object.entries(i.body))d[m]=S;let g={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql",[N]:"auto.db.supabase",[M]:`db.${s}`};return f.length&&(g["db.query"]=f),Object.keys(d).length&&(g["db.body"]=d),_e({name:u,attributes:g},m=>Reflect.apply(t,n,[]).then(S=>{if(m&&(S&&typeof S=="object"&&"status"in S&&He(m,S.status||500),m.end()),S.error){let oe=new Error(S.error.message);S.error.code&&(oe.code=S.error.code),S.error.details&&(oe.details=S.error.details);let Te={};f.length&&(Te.query=f),Object.keys(d).length&&(Te.body=d),Se(oe,{contexts:{supabase:Te}})}let V={type:"supabase",category:`db.${s}`,message:u},T={};return f.length&&(T.query=f),Object.keys(d).length&&(T.body=d),Object.keys(T).length&&(V.data=T),re(V),S},S=>{throw m&&(He(m,500),m.end()),S}).then(...r))}}),Sn(e.prototype.then))}function Rc(e){for(let t of zi)En(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){let i=Reflect.apply(n,r,o),s=i.constructor;return l&&p.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),bc(s),i}}),Sn(e.prototype[t]))}var Yr=e=>{if(!e){l&&p.warn("Supabase integration was not installed because no Supabase client was provided.");return}let t=e.constructor===Function?e:e.constructor;xc(t),Ac(e)},Nc="Supabase",Cc=e=>({setupOnce(){Yr(e)},name:Nc}),Yi=e=>Cc(e.supabaseClient);var Oc=10,vc="ZodErrors";function wc(e){return k(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function Dc(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Mc(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function Pc(e){let t=new Set;for(let r of e.issues){let o=Mc(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Y(n.join(", "),100)}`}function kc(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!wc(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(Dc);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:Pc(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var Uc=(e={})=>{let t=e.limit??Oc;return{name:vc,processEvent(n,r){return kc(t,e.saveZodIssuesAsAttachment,n,r)}}},Wi=Uc;var Fc=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{ge(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&(_n(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;gn(r,n)})},processEvent(t){let n=Lc(t);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function Lc(e){let t=je(e);if(t)return t.filter(n=>!!n.filename).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(Ji)).map(r=>r.slice(Ji.length)):[])}var Ji="_sentryBundlerPluginAppKey:";var Bc="Console",$c=(e={})=>{let t=new Set(e.levels||K);return{name:Bc,setup(n){Ee(({args:r,level:o})=>{h()!==n||!t.has(o)||Hc(o,r)})}}};function Hc(e,t){let n={category:"console",data:{arguments:t,logger:"console"},level:Me(e),message:qi(t)};if(e==="assert")if(t[0]===!1){let r=t.slice(1);n.message=r.length>0?`Assertion failed: ${qi(r)}`:"Assertion failed",n.data.arguments=r}else return;re(n,{input:t,level:e})}function qi(e){return"util"in _&&typeof _.util.format=="function"?_.util.format(...e):X(e," ")}var Vi=new WeakSet;function Qi(e){return Vi.has(e)?e:Jc(e)?(e.connect=new Proxy(e.connect,{apply(t,n,r){let[o,...i]=r;o.onclose||(o.onclose=()=>{o.sessionId&&Xi(o.sessionId)}),o.onmessage||(o.onmessage=a=>{o.sessionId&&Ki(a)&&Zi(o.sessionId,a.id)});let s=new Proxy(o,{set(a,c,u){return c==="onmessage"?a[c]=new Proxy(u,{apply(f,d,g){let[m]=g;return o.sessionId&&Ki(m)&&Zi(o.sessionId,m.id),Reflect.apply(f,d,g)}}):c==="onclose"?a[c]=new Proxy(u,{apply(f,d,g){return o.sessionId&&Xi(o.sessionId),Reflect.apply(f,d,g)}}):a[c]=u,!0}});return Reflect.apply(t,n,[s,...i])}}),e.resource=new Proxy(e.resource,{apply(t,n,r){let o=r[0],i=r[r.length-1];if(typeof o!="string"||typeof i!="function")return t.apply(n,r);let s=new Proxy(i,{apply(a,c,u){let f=u.find(Wr);return Jr(f,()=>_e({name:`mcp-server/resource:${o}`,forceTransaction:!0,attributes:{[M]:"auto.function.mcp-server",[N]:"auto.function.mcp-server",[O]:"route","mcp_server.resource":o}},()=>a.apply(c,u)))}});return Reflect.apply(t,n,[...r.slice(0,-1),s])}}),e.tool=new Proxy(e.tool,{apply(t,n,r){let o=r[0],i=r[r.length-1];if(typeof o!="string"||typeof i!="function")return t.apply(n,r);let s=new Proxy(i,{apply(a,c,u){let f=u.find(Wr);return Jr(f,()=>_e({name:`mcp-server/tool:${o}`,forceTransaction:!0,attributes:{[M]:"auto.function.mcp-server",[N]:"auto.function.mcp-server",[O]:"route","mcp_server.tool":o}},()=>a.apply(c,u)))}});return Reflect.apply(t,n,[...r.slice(0,-1),s])}}),e.prompt=new Proxy(e.prompt,{apply(t,n,r){let o=r[0],i=r[r.length-1];if(typeof o!="string"||typeof i!="function")return t.apply(n,r);let s=new Proxy(i,{apply(a,c,u){let f=u.find(Wr);return Jr(f,()=>_e({name:`mcp-server/prompt:${o}`,forceTransaction:!0,attributes:{[M]:"auto.function.mcp-server",[N]:"auto.function.mcp-server",[O]:"route","mcp_server.prompt":o}},()=>a.apply(c,u)))}});return Reflect.apply(t,n,[...r.slice(0,-1),s])}}),Vi.add(e),e):(l&&p.warn("Did not patch MCP server. Interface is incompatible."),e)}function Jc(e){return typeof e=="object"&&e!==null&&"resource"in e&&typeof e.resource=="function"&&"tool"in e&&typeof e.tool=="function"&&"prompt"in e&&typeof e.prompt=="function"&&"connect"in e&&typeof e.connect=="function"}function Ki(e){return typeof e=="object"&&e!==null&&"id"in e&&(typeof e.id=="number"||typeof e.id=="string")}function Wr(e){return typeof e=="object"&&e!==null&&"sessionId"in e&&typeof e.sessionId=="string"&&"requestId"in e&&(typeof e.requestId=="number"||typeof e.requestId=="string")}var Tn=new Map;function Xi(e){Tn.delete(e)}function Zi(e,t){let n=J();if(n){let r=Tn.get(e)??new Map;r.set(t,n),Tn.set(e,r)}}function Jr(e,t){if(e){let{sessionId:n,requestId:r}=e,o=Tn.get(n);if(!o)return t();let i=o.get(r);return i?(o.delete(r),Ye(i,()=>t())):t()}return t()}function es(e,t={},n=E()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,f={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},d=n?.getClient()||h();return d&&d.emit("beforeSendFeedback",f,t),n.captureEvent(f,t)}var qc="ConsoleLogs",ts={[N]:"auto.console.logging"},Vc=(e={})=>{let t=e.levels||K;return{name:qc,setup(n){if(!n.getOptions()._experiments?.enableLogs){l&&p.warn("`_experiments.enableLogs` is not enabled, ConsoleLogs integration disabled");return}Ee(({args:r,level:o})=>{if(h()!==n||!t.includes(o))return;if(o==="assert"){if(!r[0]){let s=r.slice(1),a=s.length>0?`Assertion failed: ${ns(s)}`:"Assertion failed";an({level:"error",message:a,attributes:ts})}return}let i=o==="log";an({level:i?"info":o,message:ns(r),severityNumber:i?10:void 0,attributes:ts})})}}},Kc=Vc;function ns(e){return"util"in _&&typeof _.util.format=="function"?_.util.format(...e):X(e," ")}function qr(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var Vr=_;function rs(){if(!("fetch"in Vr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Kr(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Xr(){if(typeof EdgeRuntime=="string")return!0;if(!rs())return!1;if(Kr(Vr.fetch))return!0;let e=!1,t=Vr.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Kr(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){l&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Qr(e,t){let n="fetch";de(n,e),le(n,()=>Xc(void 0,t))}function Xc(e,t=!1){t&&!Xr()||Ke(_,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=Zc(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:R()*1e3,virtualError:o,headers:Qc(r)};return e||ee("fetch",{...a}),n.apply(_,r).then(async c=>(e?e(c):ee("fetch",{...a,endTimestamp:R()*1e3,response:c}),c),c=>{if(ee("fetch",{...a,endTimestamp:R()*1e3,error:c}),k(c)&&c.stack===void 0&&(c.stack=o.stack,b(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{let u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}function Zr(e,t){return!!e&&typeof e=="object"&&!!e[t]}function os(e){return typeof e=="string"?e:e?Zr(e,"url")?e.url:e.toString?e.toString():"":""}function Zc(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:os(n),method:Zr(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:os(t),method:Zr(t,"method")?String(t.method).toUpperCase():"GET"}}function Qc(e){let[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Nn(t))return new Headers(t.headers)}catch{}}function eo(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&e!==void 0&&!e.includes("node_modules/")}function ss(e){let t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{let o=r.match(n);if(o){let i,s,a,c,u;if(o[1]){a=o[1];let g=a.lastIndexOf(".");if(a[g-1]==="."&&g--,g>0){i=a.slice(0,g),s=a.slice(g+1);let m=i.indexOf(".Module");m>0&&(a=a.slice(m+1),i=i.slice(0,m))}c=void 0}s&&(c=i,u=s),s==="<anonymous>"&&(u=void 0,a=void 0),a===void 0&&(u=u||rt,a=c?`${c}.${u}`:u);let f=o[2]?.startsWith("file://")?o[2].slice(7):o[2],d=o[5]==="native";return f?.match(/\/[A-Z]:/)&&(f=f.slice(1)),!f&&o[5]&&!d&&(f=o[5]),{filename:f?decodeURI(f):void 0,module:e?e(f):void 0,function:a,lineno:is(o[3]),colno:is(o[4]),in_app:eo(f||"",d)}}if(r.match(t))return{filename:r}}}function mt(e){return[90,ss(e)]}function is(e){return parseInt(e||"",10)||void 0}var gt=class{constructor(t){this._maxSize=t,this._cache=new Map}get size(){return this._cache.size}get(t){let n=this._cache.get(t);if(n!==void 0)return this._cache.delete(t),this._cache.set(t,n),n}set(t,n){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(t,n)}remove(t){let n=this._cache.get(t);return n&&this._cache.delete(t),n}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){let t=[];return this._cache.forEach(n=>t.push(n)),t}};function nu(){return Deno.permissions.querySync&&Deno.permissions.querySync({name:"sys",kind:"hostname"}).state==="granted"?Deno.hostname():void 0}var _t=class extends dt{constructor(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.deno",packages:[{name:"denoland:sentry",version:G}],version:G};let n={...t,platform:"javascript",runtime:{name:"deno",version:Deno.version.deno},serverName:t.serverName||nu()};super(n)}};var ru="Breadcrumbs",ou=(e={})=>{let t={console:!0,fetch:!0,sentry:!0,...e};return{name:ru,setup(n){t.console&&Ee(su(n)),t.fetch&&Qr(au(n)),t.sentry&&n.on("beforeSendEvent",iu(n))}}},to=ou;function iu(e){return function(n){h()===e&&re({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:ie(n)},{event:n})}}function su(e){return function(n){if(h()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:Me(n.level),message:X(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${X(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;re(r,{input:n.args,level:n.level})}}function au(e){return function(n){if(h()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(!o||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;let i={method:n.fetchData.method,url:n.fetchData.url};if(n.error){let s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o};re({category:"fetch",data:i,level:"error",type:"http"},s)}else{let s=n.response;i.request_body_size=n.fetchData.request_body_size,i.response_body_size=n.fetchData.response_body_size,i.status_code=s?.status;let a={input:n.args,response:s,startTimestamp:r,endTimestamp:o},c=qr(i.status_code);re({category:"fetch",data:i,type:"http",level:c},a)}}}var cu="DenoContext";function uu(){switch(Deno.build.os){case"darwin":return"macOS";case"linux":return"Linux";case"windows":return"Windows";default:return Deno.build.os}}async function pu(){return(await Deno.permissions.query({name:"sys",kind:"osRelease"})).state==="granted"?Deno.osRelease():void 0}async function fu(e){return e.contexts={app:{app_start_time:new Date(Date.now()-performance.now()).toISOString()},device:{arch:Deno.build.arch,processor_count:navigator.hardwareConcurrency},os:{name:uu(),version:await pu()},v8:{name:"v8",version:Deno.version.v8},typescript:{name:"TypeScript",version:Deno.version.typescript},...e.contexts},e}var du=()=>({name:cu,processEvent(e){return fu(e)}}),no=du;var lu="ContextLines",as=new gt(100),mu=7;async function gu(e){let t=as.get(e);if(t!==void 0)return t;let n=null;try{n=await Deno.readTextFile(e)}catch{}return as.set(e,n),n}var _u=(e={})=>{let t=e.frameContextLines!==void 0?e.frameContextLines:mu;return{name:lu,processEvent(n){return hu(n,t)}}},ro=_u;async function hu(e,t){if(t>0&&e.exception?.values)for(let n of e.exception.values)n.stacktrace?.frames&&await Su(n.stacktrace.frames,t);return e}async function Su(e,t){for(let n of e)if(n.filename&&n.in_app&&n.context_line===void 0&&(await Deno.permissions.query({name:"read",path:n.filename})).state=="granted"){let o=await gu(n.filename);if(o)try{let i=o.split(`
`);Dn(i,n,t)}catch{}}}var Eu="GlobalHandlers",yn=!1,Tu=e=>{let t={error:!0,unhandledrejection:!0,...e};return{name:Eu,setup(n){t.error&&yu(n),t.unhandledrejection&&Iu(n)}}},oo=Tu;function yu(e){globalThis.addEventListener("error",t=>{if(h()!==e||yn)return;let n=cs(),{message:r,error:o}=t,i=Je(e,n,o||r);i.level="fatal",ut(i,{originalException:o,mechanism:{handled:!1,type:"error"}}),t.preventDefault(),yn=!0,pt().then(()=>{throw o},()=>{throw o})})}function Iu(e){globalThis.addEventListener("unhandledrejection",t=>{if(h()!==e||yn)return;let n=cs(),r=t;try{"reason"in t&&(r=t.reason)}catch{}let o=xe(r)?Au(r):Je(e,n,r,void 0);o.level="fatal",ut(o,{originalException:r,mechanism:{handled:!1,type:"unhandledrejection"}}),t.preventDefault(),yn=!0,pt().then(()=>{throw r},()=>{throw r})})}function Au(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function cs(){let e=h();return e?e.getOptions().stackParser:()=>[]}var xu="NormalizePaths";function bu(e){let n=Ge(mt())(e.stack||"").filter(i=>i.in_app&&i.filename).map(i=>i.filename.replace(/^[A-Z]:/,"").replace(/\\/g,"/").split("/").filter(s=>s!=="")),r=n[0];if(!r)return;if(n.length==1)return jr(r.join("/"));let o=0;for(;r[o]&&n.every(i=>i[o]===r[o]);)o++;return r.slice(0,o).join("/")}function Ru(){if(!Deno.permissions.querySync)return;let e=Deno.permissions.querySync({name:"read",path:"./"});try{if(e.state=="granted")return Deno.cwd()}catch{}}var Nu=()=>{let e;function t(n){return e===void 0&&(e=Ru()||bu(n)),e}return{name:xu,processEvent(n){let r=new Error,o=t(r);if(o){for(let i of n.exception?.values||[])for(let s of i.stacktrace?.frames||[])if(s.filename&&s.in_app){let a=s.filename.indexOf(o);if(a>-1){let c=a+o.length;s.filename=`app://${s.filename.substring(c)}`}}}return n}}},io=Nu;function us(e){let t=new URL(e.url);Deno.permissions.query({name:"net",host:t.host}).then(({state:r})=>{r!=="granted"&&z(()=>{console.warn(`Sentry SDK requires 'net' permission to send events.
    Run with '--allow-net=${t.host}' to grant the requires permissions.`)})}).catch(()=>{p.warn('Failed to read the "net" permission.')});function n(r){let o={body:r.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers};try{return qt(()=>fetch(e.url,o).then(i=>({statusCode:i.status,headers:{"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")}})))}catch(i){return De(i)}}return pn(e,n)}function ps(e){return[ln(),fn(),mn(),hn(),to(),no(),ro(),io(),oo()]}var Cu=Ge(mt());function Ou(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=ps());let t={...e,stackParser:Yn(e.stackParser||Cu),integrations:Ir(e),transport:e.transport||us};return wr(_t,t)}function ht(e){if(e===void 0)return"*";if(typeof e=="number")return e.toString();{let{exact:t}=e;if(t===void 0){let{start:n,end:r,every:o}=e;if(n!==void 0&&r!==void 0&&o!==void 0)return`${n}-${r}/${o}`;if(n!==void 0&&r!==void 0)return`${n}-${r}`;if(n!==void 0&&o!==void 0)return`${n}/${o}`;if(n!==void 0)return`${n}/1`;if(r===void 0&&o!==void 0)return`*/${o}`;throw new TypeError("Invalid cron schedule")}else return typeof t=="number"?t.toString():t.join(",")}}function fs(e){if(typeof e=="string")return e;{let{minute:t,hour:n,dayOfMonth:r,month:o,dayOfWeek:i}=e;return`${ht(t)} ${ht(n)} ${ht(r)} ${ht(o)} ${ht(i)}`}}var vu="DenoCron",ds=new WeakMap,wu=()=>({name:vu,setupOnce(){Deno.cron&&(Deno.cron=new Proxy(Deno.cron,{apply(e,t,n){let[r,o,i,s]=n,a,c;typeof i=="function"&&typeof s!="function"?(c=i,a=s):typeof i!="function"&&typeof s=="function"&&(c=s,a=i);async function u(){if(!ds.has(h()))return c();await en(r,async()=>c(),{schedule:{type:"crontab",value:fs(o)},maxRuntime:60*12,checkinMargin:1})}return e.call(t,r,o,a||{},u)}}))},setup(e){ds.set(e,!0)}}),Du=wu;export{_t as DenoClient,G as SDK_VERSION,M as SEMANTIC_ATTRIBUTE_SENTRY_OP,N as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,Fe as SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,O as SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,D as Scope,re as addBreadcrumb,ri as addEventProcessor,to as breadcrumbsIntegration,Qt as captureCheckIn,ki as captureConsoleIntegration,ut as captureEvent,Se as captureException,es as captureFeedback,ct as captureMessage,si as captureSession,ti as close,ro as contextLinesIntegration,jo as continueTrace,pn as createTransport,hn as dedupeIntegration,no as denoContextIntegration,Du as denoCronIntegration,tn as endSession,Fr as eventFiltersIntegration,Bi as extraErrorDataIntegration,pt as flush,fn as functionToStringIntegration,J as getActiveSpan,h as getClient,E as getCurrentScope,ps as getDefaultIntegrations,xt as getGlobalScope,y as getIsolationScope,C as getRootSpan,$n as getSpanStatusFromHttpCode,lt as getTraceData,xi as getTraceMetaTags,oo as globalHandlersIntegration,ln as inboundFiltersIntegration,Ou as init,Yr as instrumentSupabaseClient,ni as isInitialized,ei as lastEventId,mn as linkedErrorsIntegration,io as normalizePathsIntegration,Pi as requestDataIntegration,Gi as rewriteFramesIntegration,qo as setContext,Dr as setCurrentClient,Ko as setExtra,Vo as setExtras,He as setHttpStatus,Lo as setMeasurement,Zo as setTag,Xo as setTags,Qo as setUser,Uo as spanToBaggageHeader,I as spanToJSON,Pt as spanToTraceHeader,Jt as startInactiveSpan,zo as startNewTrace,oi as startSession,_e as startSpan,mr as startSpanManual,Yi as supabaseIntegration,qt as suppressTracing,Oo as updateSpanName,bt as withIsolationScope,en as withMonitor,$ as withScope,Qi as wrapMcpServerWithSentry,Wi as zodErrorsIntegration};
