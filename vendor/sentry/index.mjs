var l=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var _=globalThis;var k=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var H="9.3.0";function C(){return Te(_),_}function Te(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||H,t[H]=t[H]||{}}function le(e,t,n=_){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[H]=r[H]||{};return o[e]||(o[e]=t())}var ki="Sentry Logger ",ye=["debug","info","warn","error","log","assert","trace"],ve={};function G(e){if(!("console"in _))return e();let t=_.console,n={},r=Object.keys(ve);r.forEach(o=>{let i=ve[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function Pi(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return k?ye.forEach(n=>{t[n]=(...r)=>{e&&G(()=>{_.console[n](`${ki}[${n}]:`,...r)})}}):ye.forEach(n=>{t[n]=()=>{}}),t}var p=le("logger",Pi);var Ge="?",Yr=/\(error: (.*)\)/,Jr=/captureMessage|captureException/;function Oe(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];if(c.length>1024)continue;let u=Yr.test(c)?c.replace(Yr,"$1"):c;if(!u.match(/\S*Error: /)){for(let f of t){let d=f(u);if(d){i.push(d);break}}if(i.length>=50+o)break}}return Kr(i.slice(o))}}function fn(e){return Array.isArray(e)?Oe(...e):e}function Kr(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(_t(t).function||"")&&t.pop(),t.reverse(),Jr.test(_t(t).function||"")&&(t.pop(),Jr.test(_t(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||_t(t).filename,function:n.function||Ge}))}function _t(e){return e[e.length-1]||{}}var pn="<anonymous>";function je(e){try{return!e||typeof e!="function"?pn:e.name||pn}catch{return pn}}function De(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var ht={},Wr={};function se(e,t){ht[e]=ht[e]||[],ht[e].push(t)}function ae(e,t){if(!Wr[e]){Wr[e]=!0;try{t()}catch(n){k&&p.error(`Error while instrumenting ${e}`,n)}}}function K(e,t){let n=e&&ht[e];if(n)for(let r of n)try{r(t)}catch(o){k&&p.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${je(r)}
Error:`,o)}}var dn=null;function ln(e){let t="error";se(t,e),ae(t,Mi)}function Mi(){dn=_.onerror,_.onerror=function(e,t,n,r,o){return K("error",{column:r,error:o,line:n,msg:e,url:t}),dn?dn.apply(this,arguments):!1},_.onerror.__SENTRY_INSTRUMENTED__=!0}var mn=null;function gn(e){let t="unhandledrejection";se(t,e),ae(t,Fi)}function Fi(){mn=_.onunhandledrejection,_.onunhandledrejection=function(e){return K("unhandledrejection",e),mn?mn.apply(this,arguments):!0},_.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}import{patchGlobal as $i}from"npm:@brc-dd/globals@^0.1.0";var Vr=Object.prototype.toString;function P(e){switch(Vr.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return W(e,Error)}}function St(e,t){return Vr.call(e)===`[object ${t}]`}function _n(e){return St(e,"ErrorEvent")}function me(e){return St(e,"String")}function we(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function ke(e){return e===null||we(e)||typeof e!="object"&&typeof e!="function"}function U(e){return St(e,"Object")}function hn(e){return typeof Event<"u"&&W(e,Event)}function Sn(e){return typeof Element<"u"&&W(e,Element)}function En(e){return St(e,"RegExp")}function L(e){return!!(e?.then&&typeof e.then=="function")}function Tn(e){return U(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function W(e,t){try{return e instanceof t}catch{return!1}}function ze(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}var Ui=_,Li=80;function yn(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,f=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||Li;for(;n&&i++<r&&(u=Bi(n,f),!(u==="html"||i>1&&s+o.length*c+u.length>=d));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function Bi(e,t){let n=e,r=[];if(!n?.tagName)return"";if(Ui.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&me(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function M(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Ye(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Ie(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{ze(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function qr(e,t,n=!1){return me(e)?En(t)?t.test(e):me(t)?n?e===t:e.includes(t):!1:!1}function Pe(e,t=[],n=!1){return t.some(r=>qr(e,r,n))}function Je(e,t,n){function r(i){if(!(t in i))return;let s=i[t],a=n(s);typeof a=="function"&&Qr(a,s);try{i[t]=a}catch(c){k&&p.log(`Failed to replace method "${t}" in object`,i,c)}return i}let o=Object.prototype.toString.call(e);o==="[object console]"?o="console":o==="[object Window]"?o="globalThis":o=void 0,o?$i(o,r):r(e)}function x(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{k&&p.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Qr(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,x(e,"__sentry_original__",t)}catch{}}function xn(e){return e.__sentry_original__}function Et(e){if(P(e))return{message:e.message,name:e.name,stack:e.stack,...Zr(e)};if(hn(e)){let t={type:e.type,target:Xr(e.target),currentTarget:Xr(e.currentTarget),...Zr(e)};return typeof CustomEvent<"u"&&W(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Xr(e){try{return Sn(e)?yn(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Zr(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function An(e,t=40){let n=Object.keys(Et(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return M(r,t);for(let o=n.length;o>0;o--){let i=n.slice(0,o).join(", ");if(!(i.length>t))return o===n.length?i:M(i,t)}return""}function S(e){return In(e,new Map)}function In(e,t){if(Hi(e)){let n=t.get(e);if(n!==void 0)return n;let r={};t.set(e,r);for(let o of Object.getOwnPropertyNames(e))typeof e[o]<"u"&&(r[o]=In(e[o],t));return r}if(Array.isArray(e)){let n=t.get(e);if(n!==void 0)return n;let r=[];return t.set(e,r),e.forEach(o=>{r.push(In(o,t))}),r}return e}function Hi(e){if(!U(e))return!1;try{let t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}var eo=1e3;function ee(){return Date.now()/eo}function Gi(){let{performance:e}=_;if(!e?.now)return ee;let t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/eo}var b=Gi();function ji(){let e=_;return e.crypto||e.msCrypto}function I(e=ji()){let t=()=>Math.random()*16;try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{let n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function to(e){return e.exception?.values?.[0]}function V(e){let{message:t,event_id:n}=e;if(t)return t;let r=to(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function bn(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function ge(e,t){let n=to(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function Rn(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>Ye(s,0));let i=Math.min(r-1,o);t.context_line=Ye(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>Ye(s,0))}function Tt(e){if(zi(e))return!0;try{x(e,"__sentry_captured__",!0)}catch{}return!1}function zi(e){try{return e.__sentry_captured__}catch{}}var ce;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(ce||(ce={}));function j(e){return new q(t=>{t(e)})}function xe(e){return new q((t,n)=>{n(e)})}var q=class e{constructor(t){this._state=ce.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===ce.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===ce.RESOLVED&&n[1](this._value),this._state===ce.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===ce.PENDING){if(L(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(ce.RESOLVED,i)},o=i=>{n(ce.REJECTED,i)};try{t(r,o)}catch(i){o(i)}}};function Nn(e){let t=b(),n={sid:I(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Yi(n)};return e&&te(n,e),n}function te(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||b(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:I()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Cn(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),te(e,n)}function Yi(e){return S({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function B(){return I()}function X(){return I().substring(16)}function _e(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=_e(r[o],t[o],n-1));return r}var vn="_sentrySpan";function he(e,t){t?x(e,vn,t):delete e[vn]}function ue(e){return e[vn]}var Ji=100,D=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:B(),sampleRand:Math.random()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,he(t,ue(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&te(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():U(n)?t:void 0,{tags:o,extra:i,user:s,contexts:a,level:c,fingerprint:u=[],propagationContext:f}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),c&&(this._level=c),u.length&&(this._fingerprint=u),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,he(this,void 0),this._attachments=[],this.setPropagationContext({traceId:B(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:Ji;if(r<=0)return this;let o={timestamp:ee(),...t};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ue(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=_e(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||I();if(!this._client)return p.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||I();if(!this._client)return p.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||I();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(p.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function On(){return le("defaultCurrentScope",()=>new D)}function Dn(){return le("defaultIsolationScope",()=>new D)}var wn=class{constructor(t,n){let r;t?r=t:r=new D;let o;n?o=n:o=new D,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return L(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function Me(){let e=C(),t=Te(e);return t.stack=t.stack||new wn(On(),Dn())}function Ki(e){return Me().withScope(e)}function Wi(e,t){let n=Me();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function no(e){return Me().withScope(()=>e(Me().getIsolationScope()))}function ro(){return{withIsolationScope:no,withScope:Ki,withSetScope:Wi,withSetIsolationScope:(e,t)=>no(t),getCurrentScope:()=>Me().getScope(),getIsolationScope:()=>Me().getIsolationScope()}}function z(e){let t=Te(e);return t.acs?t.acs:ro()}function E(){let e=C();return z(e).getCurrentScope()}function T(){let e=C();return z(e).getIsolationScope()}function yt(){return le("globalScope",()=>new D)}function $(...e){let t=C(),n=z(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function It(...e){let t=C(),n=z(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function h(){return E().getClient()}function Ke(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t;return S({trace_id:n,span_id:o||X(),parent_span_id:r})}var Y="sentry.source",Fe="sentry.sample_rate",Se="sentry.op",pe="sentry.origin";var xt="sentry.measurement_unit",At="sentry.measurement_value",Ue="sentry.custom_span_name",Le="sentry.profile_id",Be="sentry.exclusive_time";function kn(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function Pn(e,t){e.setAttribute("http.response.status_code",t);let n=kn(t);n.message!=="unknown_error"&&e.setStatus(n)}var oo="_sentryScope",io="_sentryIsolationScope";function Mn(e,t,n){e&&(x(e,io,n),x(e,oo,t))}function Ee(e){return{scope:e[oo],isolationScope:e[io]}}function ne(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var bt="sentry-",ao=/^sentry-/,co=8192;function We(e){let t=uo(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(ao)){let s=o.slice(bt.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function Ve(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${bt}${r}`]=o),n),{});return po(t)}function uo(e){if(!(!e||!me(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=so(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):so(e)}function so(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function po(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>co?(k&&p.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var Rt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function fo(e){if(!e)return;let t=e.match(Rt);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Fn(e,t){let n=fo(e),r=We(t);if(!n?.traceId)return{traceId:B(),sampleRand:Math.random()};let o=Vi(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function qe(e=B(),t=X(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Vi(e,t){let n=ne(t?.sample_rand);if(n!==void 0)return n;let r=ne(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}var Nt=0,Ct=1,lo=!1;function ho(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=y(e);return S({parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c})}function Ze(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:y(e).parent_span_id,i=Ee(e).scope,s=r?i?.getPropagationContext().propagationSpanId||X():t;return S({parent_span_id:o,span_id:s,trace_id:n})}function vt(e){let{traceId:t,spanId:n}=e.spanContext(),r=oe(e);return qe(t,n,r)}function Ot(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===Ct,attributes:i,...o}))}function re(e){return typeof e=="number"?mo(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?mo(e.getTime()):b()}function mo(e){return e>9999999999?e/1e3:e}function y(e){if(Xi(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(qi(e)){let{attributes:r,startTime:o,name:i,endTime:s,parentSpanId:a,status:c,links:u}=e;return S({span_id:t,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:re(o),timestamp:re(s)||void 0,status:Dt(c),op:r[Se],origin:r[pe],links:Ot(u)})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function qi(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Xi(e){return typeof e.getSpanJSON=="function"}function oe(e){let{traceFlags:t}=e.spanContext();return t===Ct}function Dt(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"unknown_error"}var Xe="_sentryChildSpans",Un="_sentryRootSpan";function wt(e,t){let n=e[Un]||e;x(t,Un,n),e[Xe]?e[Xe].add(t):x(e,Xe,new Set([t]))}function kt(e){let t=new Set;function n(r){if(!t.has(r)&&oe(r)){t.add(r);let o=r[Xe]?Array.from(r[Xe]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function A(e){return e[Un]||e}function ie(){let e=C(),t=z(e);return t.getActiveSpan?t.getActiveSpan():ue(E())}function Qe(){lo||(G(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),lo=!0)}function So(e,t){e.updateName(t),e.setAttributes({[Y]:"custom",[Ue]:t})}var Eo=!1;function Bn(){Eo||(Eo=!0,ln(Ln),gn(Ln))}function Ln(){let e=ie(),t=e&&A(e);if(t){let n="internal_error";l&&p.log(`[Tracing] Root span: ${n} -> Global error occurred`),t.setStatus({code:2,message:n})}}Ln.tag="sentry_tracingErrorCallback";function fe(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||h()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}var be="production";var To="_frozenDsc";function et(e,t){x(e,To,t)}function $n(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o=S({environment:n.environment||be,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",o),o}function Re(e,t){let n=t.getPropagationContext();return n.dsc||$n(n.traceId,e)}function v(e){let t=h();if(!t)return{};let n=A(e),r=y(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[Fe];function a(F){return(typeof s=="number"||typeof s=="string")&&(F.sample_rate=`${s}`),F}let c=n[To];if(c)return a(c);let u=i?.get("sentry.dsc"),f=u&&We(u);if(f)return a(f);let d=$n(e.spanContext().traceId,t),g=o[Y],m=r.description;return g!=="url"&&m&&(d.transaction=m),fe()&&(d.sampled=String(oe(n)),d.sample_rand=i?.get("sentry.sample_rand")??Ee(n).scope?.getPropagationContext().sampleRand.toString()),a(d),t.emit("createDsc",d,n),d}function yo(e){let t=v(e);return Ve(t)}var Z=class{constructor(t={}){this._traceId=t.traceId||B(),this._spanId=t.spanId||X()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Nt}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Pt(e,t,n=()=>{}){let r;try{r=e()}catch(o){throw t(o),n(),o}return Zi(r,t,n)}function Zi(e,t,n){return L(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function Hn(e){if(!l)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=y(e),{spanId:o}=e.spanContext(),i=oe(e),s=A(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:f,description:d}=y(s);u.push(`root ID: ${s.spanContext().spanId}`),f&&u.push(`root op: ${f}`),d&&u.push(`root description: ${d}`)}p.log(`${c}
  ${u.join(`
  `)}`)}function Gn(e){if(!l)return;let{description:t="< unknown name >",op:n="< unknown op >"}=y(e),{spanId:r}=e.spanContext(),i=A(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;p.log(s)}function jn(e,t,n){if(!fe(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=ne(o);if(i===void 0)return l&&p.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return l&&p.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||l&&p.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Qi=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function es(e){return e==="http"||e==="https"}function Q(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function zn(e){let t=Qi.exec(e);if(!t){G(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,f=u.split("/");if(f.length>1&&(c=f.slice(0,-1).join("/"),u=f.pop()),u){let d=u.match(/^\d+/);d&&(u=d[0])}return Io({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function Io(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function ts(e){if(!k)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(p.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?es(r)?t&&isNaN(parseInt(t,10))?(p.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(p.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(p.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Mt(e){let t=typeof e=="string"?zn(e):Io(e);if(!(!t||!ts(t)))return t}function w(e,t=100,n=1/0){try{return Yn("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ft(e,t=3,n=100*1024){let r=w(e,t);return is(r)>n?Ft(e,t-1,n):r}function Yn(e,t,n=1/0,r=1/0,o=ss()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=ns(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let m=u.toJSON();return Yn("",m,c-1,r,o)}catch{}let f=Array.isArray(t)?[]:{},d=0,g=Et(t);for(let m in g){if(!Object.prototype.hasOwnProperty.call(g,m))continue;if(d>=r){f[m]="[MaxProperties ~]";break}let F=g[m];f[m]=Yn(m,F,c-1,r,o),d++}return s(t),f}function ns(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ze(t))return"[VueViewModel]";if(Tn(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${je(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=rs(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function rs(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function os(e){return~-encodeURI(e).split(/%..|./).length}function is(e){return os(JSON.stringify(e))}function ss(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function J(e,t=[]){return[e,t]}function Kn(e,t){let[n,r]=e;return[n,[...r,t]]}function de(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function Jn(e){let t=Te(_);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Wn(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[Jn(r),i]:r.push(typeof i=="string"?Jn(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(w(a))}o(c)}}return typeof r=="string"?r:as(r)}function as(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function Vn(e){return[{type:"span"},e]}function qn(e){let t=typeof e.data=="string"?Jn(e.data):e.data;return[S({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}var cs={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function Ut(e){return cs[e]}function Lt(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Xn(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Q(r)},...o&&{trace:S({...o})}}}function us(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Zn(e,t,n,r){let o=Lt(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Q(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return J(i,[s])}function Qn(e,t,n,r){let o=Lt(n),i=e.type&&e.type!=="replay_event"?e.type:"event";us(e,n?.sdk);let s=Xn(e,o,r,t);return delete e.sdkProcessingMetadata,J(s,[[{type:i},e]])}function er(e,t){function n(f){return!!f.trace_id&&!!f.public_key}let r=v(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Q(o)}},a=t?.getOptions().beforeSendSpan,c=a?f=>{let d=y(f),g=a(d);return g||(Qe(),d)}:y,u=[];for(let f of e){let d=c(f);d&&u.push(Vn(d))}return J(s,u)}function xo(e,t,n,r=ie()){let o=r&&A(r);o&&(l&&p.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[At]:t,[xt]:n}))}function Bt(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[xt],i=r[At];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var Ao=1e3,Ne=class{constructor(t={}){this._traceId=t.traceId||B(),this._spanId=t.spanId||X(),this._startTime=t.startTimestamp||b(),this._links=t.links,this._attributes={},this.setAttributes({[pe]:"manual",[Se]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Ct:Nt}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=re(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Y,"custom"),this}end(t){this._endTime||(this._endTime=re(t),Gn(this),this._onSpanEnded())}getSpanJSON(){return S({data:this._attributes,description:this._name,op:this._attributes[Se],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Dt(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[pe],profile_id:this._attributes[Le],exclusive_time:this._attributes[Be],measurements:Bt(this._events),is_segment:this._isStandaloneSpan&&A(this)===this||void 0,segment_id:this._isStandaloneSpan?A(this).spanContext().spanId:void 0,links:Ot(this._links)})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){l&&p.log("[Tracing] Adding an event to span:",t);let o=bo(n)?n:r||b(),i=bo(n)?{}:n||{},s={name:t,time:re(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=h();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===A(this)))return;if(this._isStandaloneSpan){this._sampled?fs(er([this],t)):(l&&p.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(Ee(this).scope||E()).captureEvent(r)}_convertSpanToTransaction(){if(!Ro(y(this)))return;this._name||(l&&p.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=Ee(this);if(this._sampled!==!0)return;let o=kt(this).filter(u=>u!==this&&!ps(u)).map(u=>y(u)).filter(Ro),i=this._attributes[Y];delete this._attributes[Ue],o.forEach(u=>{delete u.data[Ue]});let s={contexts:{trace:ho(this)},spans:o.length>Ao?o.sort((u,f)=>u.start_timestamp-f.start_timestamp).slice(0,Ao):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,...S({dynamicSamplingContext:v(this)})},...i&&{transaction_info:{source:i}}},a=Bt(this._events);return a&&Object.keys(a).length&&(l&&p.log("[Measurements] Adding measurements to transaction event",JSON.stringify(a,void 0,2)),s.measurements=a),s}};function bo(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Ro(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function ps(e){return e instanceof Ne&&e.isStandaloneSpan()}function fs(e){let t=h();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}var tr="__SENTRY_SUPPRESS_TRACING__";function Co(e,t){let n=tt();if(n.startSpan)return n.startSpan(e,t);let r=or(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return $(a,()=>Do(i)(()=>{let u=E(),f=ir(u),g=e.onlyIfParent&&!f?new Z:rr({parentSpan:f,spanArguments:r,forceTransaction:o,scope:u});return he(u,g),Pt(()=>t(g),()=>{let{status:m}=y(g);g.isRecording()&&(!m||m==="ok")&&g.setStatus({code:2,message:"internal_error"})},()=>{g.end()})}))}function nr(e,t){let n=tt();if(n.startSpanManual)return n.startSpanManual(e,t);let r=or(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return $(a,()=>Do(i)(()=>{let u=E(),f=ir(u),g=e.onlyIfParent&&!f?new Z:rr({parentSpan:f,spanArguments:r,forceTransaction:o,scope:u});return he(u,g),Pt(()=>t(g,()=>g.end()),()=>{let{status:m}=y(g);g.isRecording()&&(!m||m==="ok")&&g.setStatus({code:2,message:"internal_error"})})}))}function $t(e){let t=tt();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=or(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>$(e.scope,s):o!==void 0?s=>Ht(o,s):s=>s())(()=>{let s=E(),a=ir(s);return e.onlyIfParent&&!a?new Z:rr({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var vo=(e,t)=>{let n=C(),r=z(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e;return $(s=>{let a=Fn(o,i);return s.setPropagationContext(a),t()})};function Ht(e,t){let n=tt();return n.withActiveSpan?n.withActiveSpan(e,t):$(r=>(he(r,e||void 0),t(r)))}function Gt(e){let t=tt();return t.suppressTracing?t.suppressTracing(e):$(n=>(n.setSDKProcessingMetadata({[tr]:!0}),e()))}function Oo(e){return $(t=>(t.setPropagationContext({traceId:B(),sampleRand:Math.random()}),l&&p.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Ht(null,e)))}function rr({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!fe()){let s=new Z;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...v(s)};et(s,a)}return s}let o=T(),i;if(e&&!n)i=ds(e,r,t),wt(e,i);else if(e){let s=v(e),{traceId:a,spanId:c}=e.spanContext(),u=oe(e);i=No({traceId:a,parentSpanId:c,...t},r,u),et(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=No({traceId:s,parentSpanId:c,...t},r,u),a&&et(i,a)}return Hn(i),Mn(i,r,o),i}function or(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=re(e.startTime),delete r.startTime,r}return n}function tt(){let e=C();return z(e)}function No(e,t,n){let r=h(),o=r?.getOptions()||{},{name:i="",attributes:s}=e,a=t.getPropagationContext(),[c,u,f]=t.getScopeData().sdkProcessingMetadata[tr]?[!1]:jn(o,{name:i,parentSampled:n,attributes:s,parentSampleRate:ne(a.dsc?.sample_rate)},a.sampleRand),d=new Ne({...e,attributes:{[Y]:"custom",[Fe]:u!==void 0&&f?u:void 0,...e.attributes},sampled:c});return!c&&r&&(l&&p.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",d),d}function ds(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[tr]?!1:oe(e),s=i?new Ne({...n,parentSpanId:r,traceId:o,sampled:i}):new Z({traceId:o});wt(e,s);let a=h();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function ir(e){let t=ue(e);if(!t)return;let n=h();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?A(t):t}function Do(e){return e!==void 0?t=>Ht(e,t):t=>t()}function nt(e,t,n,r=0){return new q((o,i)=>{let s=e[r];if(t===null||typeof s!="function")o(t);else{let a=s({...t},n);l&&s.id&&a===null&&p.log(`Event processor "${s.id}" dropped event`),L(a)?a.then(c=>nt(e,c,n,r+1).then(o)).then(null,i):nt(e,a,n,r+1).then(o).then(null,i)}})}var jt,wo,zt;function sr(e){let t=_._sentryDebugIds;if(!t)return{};let n=Object.keys(t);return zt&&n.length===wo||(wo=n.length,zt=n.reduce((r,o)=>{jt||(jt={});let i=jt[o];if(i)r[i[0]]=i[1];else{let s=e(o);for(let a=s.length-1;a>=0;a--){let u=s[a]?.filename,f=t[o];if(u&&f){r[u]=f,jt[o]=[u,f];break}}}return r},{})),zt}function ar(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;ms(e,t),r&&hs(e,r),Ss(e,n),gs(e,o),_s(e,i)}function Jt(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:f,attachments:d,propagationContext:g,transactionName:m,span:F}=t;Yt(e,"extra",n),Yt(e,"tags",r),Yt(e,"user",o),Yt(e,"contexts",i),e.sdkProcessingMetadata=_e(e.sdkProcessingMetadata,a,2),s&&(e.level=s),m&&(e.transactionName=m),F&&(e.span=F),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),f.length&&(e.eventProcessors=[...e.eventProcessors,...f]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...g}}function Yt(e,t,n){e[t]=_e(e[t],n,1)}function ms(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t,c=S(n);Object.keys(c).length&&(e.extra={...c,...e.extra});let u=S(r);Object.keys(u).length&&(e.tags={...u,...e.tags});let f=S(o);Object.keys(f).length&&(e.user={...f,...e.user});let d=S(i);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function gs(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function _s(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function hs(e,t){e.contexts={trace:Ze(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:v(t),...e.sdkProcessingMetadata};let n=A(t),r=y(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function Ss(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function cr(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||I(),timestamp:t.timestamp||ee()},u=n.integrations||e.integrations.map(O=>O.name);Es(c,e),Is(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&Ts(c,e.stackParser);let f=As(r,n.captureContext);n.mechanism&&ge(c,n.mechanism);let d=o?o.getEventProcessors():[],g=yt().getScopeData();if(i){let O=i.getScopeData();Jt(g,O)}if(f){let O=f.getScopeData();Jt(g,O)}let m=[...n.attachments||[],...g.attachments];m.length&&(n.attachments=m),ar(c,g);let F=[...d,...g.eventProcessors];return nt(F,c,n).then(O=>(O&&ys(O),typeof s=="number"&&s>0?xs(O,s,a):O))}function Es(e,t){let{environment:n,release:r,dist:o,maxValueLength:i=250}=t;e.environment=e.environment||n||be,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o),e.message&&(e.message=M(e.message,i));let s=e.exception?.values?.[0];s?.value&&(s.value=M(s.value,i));let a=e.request;a?.url&&(a.url=M(a.url,i))}function Ts(e,t){let n=sr(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function ys(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function Is(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function xs(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:w(o.data,t,n)}}))},...e.user&&{user:w(e.user,t,n)},...e.contexts&&{contexts:w(e.contexts,t,n)},...e.extra&&{extra:w(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=w(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:w(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=w(e.contexts.flags,3,n)),r}function As(e,t){if(!t)return e;let n=e?e.clone():new D;return n.update(t),n}function ko(e){if(e)return bs(e)?{captureContext:e}:Ns(e)?{captureContext:e}:e}function bs(e){return e instanceof D||typeof e=="function"}var Rs=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Ns(e){return Object.keys(e).some(t=>Rs.includes(t))}function rt(e,t){return E().captureException(e,ko(t))}function ot(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return E().captureMessage(e,n,r)}function it(e,t){return E().captureEvent(e,t)}function Po(e,t){T().setContext(e,t)}function Mo(e){T().setExtras(e)}function Fo(e,t){T().setExtra(e,t)}function Uo(e){T().setTags(e)}function Lo(e,t){T().setTag(e,t)}function Bo(e){T().setUser(e)}function $o(){return T().lastEventId()}function Kt(e,t){let n=E(),r=h();if(!r)l&&p.warn("Cannot capture check-in. No client defined.");else if(!r.captureCheckIn)l&&p.warn("Cannot capture check-in. Client does not support sending check-ins.");else return r.captureCheckIn(e,t,n);return I()}function Wt(e,t,n){let r=Kt({monitorSlug:e,status:"in_progress"},n),o=b();function i(s){Kt({monitorSlug:e,status:s,checkInId:r,duration:b()-o})}return It(()=>{let s;try{s=t()}catch(a){throw i("error"),a}return L(s)?Promise.resolve(s).then(()=>{i("ok")},a=>{throw i("error"),a}):i("ok"),s})}async function st(e){let t=h();return t?t.flush(e):(l&&p.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Ho(e){let t=h();return t?t.close(e):(l&&p.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Go(){return!!h()}function ur(){let e=h();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function jo(e){T().addEventProcessor(e)}function zo(e){let t=T(),n=E(),{userAgent:r}=_.navigator||{},o=Nn({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&te(i,{status:"exited"}),Vt(),t.setSession(o),o}function Vt(){let e=T(),n=E().getSession()||e.getSession();n&&Cn(n),Yo(),e.setSession()}function Yo(){let e=T(),t=h(),n=e.getSession();n&&t&&t.captureSession(n)}function Jo(e=!1){if(e){Vt();return}Yo()}var Cs="7";function vs(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Os(e){return`${vs(e)}${e.projectId}/envelope/`}function Ds(e,t){let n={sentry_version:Cs};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function qt(e,t,n){return t||`${Os(e)}?${Ds(e,n)}`}var Ko=[];function ws(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function pr(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return ws(r)}function Wo(e,t){let n={};return t.forEach(r=>{r&&dr(e,r,n)}),n}function fr(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function dr(e,t,n){if(n[t.name]){l&&p.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Ko.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Ko.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}l&&p.log(`Integration installed: ${t.name}`)}function lr(e,t,n){let r=[{type:"client_report"},{timestamp:n||ee(),discarded_events:e}];return J(t?{dsn:t}:{},[r])}var R=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}};function Xt(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Vo(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return S({data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[Le],exclusive_time:s?.[Be],measurements:e.measurements,is_segment:!0})}function qo(e){let t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Le]:e.profile_id},...e.exclusive_time&&{[Be]:e.exclusive_time}}}},measurements:e.measurements};return S(t)}var Xo="Not capturing exception because it's already been captured.",Zo="Discarded session because of missing or non-string release",at=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Mt(t.dsn):l&&p.warn("No DSN provided, client will not send events."),this._dsn){let n=qt(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){let o=I();if(Tt(t))return l&&p.log(Xo),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:I(),...r},s=we(t)?t:String(t),a=ke(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=I();if(n?.originalException&&Tt(n.originalException))return l&&p.log(Xo),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,c)),i.event_id}captureSession(t){this.sendSession(t),te(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(o=>r&&o))):j(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];dr(this,t,this._integrations),n||fr(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Qn(t,this._dsn,this._options._metadata,this._options.tunnel);for(let i of n.attachments||[])r=Kn(r,qn(i));let o=this.sendEnvelope(r);o&&o.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){let{release:n,environment:r=be}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){l&&p.warn(Zo);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){l&&p.warn(Zo);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=Zn(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;l&&p.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{let o=r.indexOf(n);o>-1&&r.splice(o,1)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(l&&p.error("Error while sending envelope:",n),n)):(l&&p.error("Transport disabled"),j({}))}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=Wo(this,t),fr(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(te(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new q(n=>{let r=0,o=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=o,t&&r>=t&&(clearInterval(i),n(!1)))},o)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),cr(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Ke(r),...a.contexts};let c=Re(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=E(),o=T()){return l&&mr(t)&&p.log(`Captured error event \`${Xt(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{l&&(i instanceof R&&i.logLevel==="log"?p.log(i.message):p.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=Qo(t),c=mr(t),u=t.type||"error",f=`before send for type \`${u}\``,d=typeof s>"u"?void 0:ne(s);if(c&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),xe(new R(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));let g=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,o).then(m=>{if(m===null)throw this.recordDroppedEvent("event_processor",g),new R("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return m;let He=Ps(this,i,m,n);return ks(He,f)}).then(m=>{if(m===null){if(this.recordDroppedEvent("before_send",g),a){let un=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",un)}throw new R(`${f} returned \`null\`, will not send event.`,"log")}let F=r.getSession()||o.getSession();if(c&&F&&this._updateSessionFromEvent(F,m),a){let O=m.sdkProcessingMetadata?.spanCountBeforeProcessing||0,un=m.spans?m.spans.length:0,zr=O-un;zr>0&&this.recordDroppedEvent("before_send","span",zr)}let He=m.transaction_info;if(a&&He&&m.transaction!==t.transaction){let O="custom";m.transaction_info={...He,source:O}}return this.sendEvent(m,n),m}).then(null,m=>{throw m instanceof R?m:(this.captureException(m,{data:{__sentry__:!0},originalException:m}),new R(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${m}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){l&&p.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){l&&p.log("No outcomes to send");return}if(!this._dsn){l&&p.log("No dsn provided, will not send outcomes");return}l&&p.log("Sending outcomes:",t);let n=lr(t,this._options.tunnel&&Q(this._dsn));this.sendEnvelope(n)}};function ks(e,t){let n=`${t} must return \`null\` or a valid event.`;if(L(e))return e.then(r=>{if(!U(r)&&r!==null)throw new R(n);return r},r=>{throw new R(`${t} rejected with ${r}`)});if(!U(e)&&e!==null)throw new R(n);return e}function Ps(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t,a=n;if(mr(a)&&o)return o(a,r);if(Qo(a)){if(s){let c=s(Vo(a));if(c?a=_e(n,qo(c)):Qe(),a.spans){let u=[];for(let f of a.spans){let d=s(f);d?u.push(d):(Qe(),u.push(f))}a.spans=u}}if(i){if(a.spans){let c=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return i(a,r)}}return a}function mr(e){return e.type===void 0}function Qo(e){return e.type==="transaction"}function gr(e,t,n,r,o){let i={sent_at:new Date().toISOString()};n?.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&o&&(i.dsn=Q(o)),t&&(i.trace=S(t));let s=Ms(e);return J(i,[s])}function Ms(e){return[{type:"check_in"},e]}function _r(e,t){return e(t.stack||"",1)}function Zt(e,t){let n={type:t.name||t.constructor.name,value:t.message},r=_r(e,t);return r.length&&(n.stacktrace={frames:r}),n}function Fs(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}function Us(e){if("name"in e&&typeof e.name=="string"){let r=`'${e.name}' captured as exception`;return"message"in e&&typeof e.message=="string"&&(r+=` with message '${e.message}'`),r}else if("message"in e&&typeof e.message=="string")return e.message;let t=An(e);if(_n(e))return`Event \`ErrorEvent\` captured as exception with message \`${e.message}\``;let n=Ls(e);return`${n&&n!=="Object"?`'${n}'`:"Object"} captured as exception with keys: ${t}`}function Ls(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Bs(e,t,n,r){if(P(n))return[n,void 0];if(t.synthetic=!0,U(n)){let i=e?.getOptions().normalizeDepth,s={__serialized__:Ft(n,i)},a=Fs(n);if(a)return[a,s];let c=Us(n),u=r?.syntheticException||new Error(c);return u.message=c,[u,s]}let o=r?.syntheticException||new Error(n);return o.message=`${n}`,[o,void 0]}function $e(e,t,n,r){let i=r?.data&&r.data.mechanism||{handled:!0,type:"generic"},[s,a]=Bs(e,i,n,r),c={exception:{values:[Zt(t,s)]}};return a&&(c.extra=a),bn(c,void 0,void 0),ge(c,i),{...c,event_id:r?.event_id}}function hr(e,t,n="info",r,o){let i={event_id:r?.event_id,level:n};if(o&&r?.syntheticException){let s=_r(e,r.syntheticException);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]},ge(i,{synthetic:!0}))}if(we(t)){let{__sentry_template_string__:s,__sentry_template_values__:a}=t;return i.logentry={message:s,params:a},i}return i.message=t,i}var ct=class extends at{constructor(t){Bn(),super(t)}eventFromException(t,n){let r=$e(this,this._options.stackParser,t,n);return r.level="error",j(r)}eventFromMessage(t,n="info",r){return j(hr(this._options.stackParser,t,n,r,this._options.attachStacktrace))}captureException(t,n,r){return ei(n),super.captureException(t,n,r)}captureEvent(t,n,r){return!t.type&&t.exception?.values&&t.exception.values.length>0&&ei(n),super.captureEvent(t,n,r)}captureCheckIn(t,n,r){let o="checkInId"in t&&t.checkInId?t.checkInId:I();if(!this._isEnabled())return l&&p.warn("SDK not enabled, will not capture check-in."),o;let i=this.getOptions(),{release:s,environment:a,tunnel:c}=i,u={check_in_id:o,monitor_slug:t.monitorSlug,status:t.status,release:s,environment:a};"duration"in t&&(u.duration=t.duration),n&&(u.monitor_config={schedule:n.schedule,checkin_margin:n.checkinMargin,max_runtime:n.maxRuntime,timezone:n.timezone,failure_issue_threshold:n.failureIssueThreshold,recovery_threshold:n.recoveryThreshold});let[f,d]=this._getTraceInfoFromScope(r);d&&(u.contexts={trace:d});let g=gr(u,f,this.getSdkMetadata(),c,this.getDsn());return l&&p.info("Sending checkin:",t.monitorSlug,t.status),this.sendEnvelope(g),o}_prepareEvent(t,n,r,o){return this._options.platform&&(t.platform=t.platform||this._options.platform),this._options.runtime&&(t.contexts={...t.contexts,runtime:t.contexts?.runtime||this._options.runtime}),this._options.serverName&&(t.server_name=t.server_name||this._options.serverName),super._prepareEvent(t,n,r,o)}_getTraceInfoFromScope(t){if(!t)return[void 0,void 0];let n=ue(t),r=n?Ze(n):Ke(t);return[n?v(n):Re(this,t),r]}};function ei(e){let t=T().getScopeData().sdkProcessingMetadata.requestSession;if(t){let n=e?.mechanism?.handled??!0;n&&t.status!=="crashed"?t.status="errored":n||(t.status="crashed")}}function Sr(e,t){t.debug===!0&&(l?p.enable():G(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),E().update(t.initialScope);let r=new e(t);return Er(r),r.init(),r}function Er(e){E().setClient(e)}function Tr(e){let t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]||Promise.resolve(void 0)}function o(s){if(!n())return xe(new R("Not adding Promise because buffer limit was reached."));let a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(s){return new q((a,c)=>{let u=t.length;if(!u)return a(!0);let f=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(d=>{j(d).then(()=>{--u||(clearTimeout(f),a(!0))},c)})})}return{$:t,add:o,drain:i}}function yr(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function ti(e,t){return e[t]||e.all||0}function Ir(e,t,n=Date.now()){return ti(e,t)>n}function xr(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,f]=a.split(":",5),d=parseInt(c,10),g=(isNaN(d)?60:d)*1e3;if(!u)o.all=r+g;else for(let m of u.split(";"))m==="metric_bucket"?(!f||f.split(";").includes("custom"))&&(o[m]=r+g):o[m]=r+g}else s?o.all=r+yr(s,r):t===429&&(o.all=r+60*1e3);return o}var $s=64;function Qt(e,t,n=Tr(e.bufferSize||$s)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(de(s,(d,g)=>{let m=Ut(g);Ir(r,m)?e.recordDroppedEvent("ratelimit_backoff",m):a.push(d)}),a.length===0)return j({});let c=J(s[0],a),u=d=>{de(c,(g,m)=>{e.recordDroppedEvent(d,Ut(m))})},f=()=>t({body:Wn(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&l&&p.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=xr(r,d),d),d=>{throw u("network_error"),d});return n.add(f).then(d=>d,d=>{if(d instanceof R)return l&&p.error("Skipped sending event because buffer is full."),u("queue_overflow"),j({});throw d})}return{send:i,flush:o}}function ut(e={}){let t=h();if(!ur()||!t)return{};let n=C(),r=z(n);if(r.getTraceData)return r.getTraceData(e);let o=E(),i=e.span||ie(),s=i?vt(i):Gs(o),a=i?v(i):Re(t,o),c=Ve(a);return Rt.test(s)?{"sentry-trace":s,baggage:c}:(p.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function Gs(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return qe(t,r,n)}function ni(){return Object.entries(ut()).map(([e,t])=>`<meta name="${e}" content="${t}"/>`).join(`
`)}var js=100;function Ce(e,t){let n=h(),r=T();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=js}=n.getOptions();if(i<=0)return;let a={timestamp:ee(),...e},c=o?G(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var ri,zs="FunctionToString",oi=new WeakMap,Ys=()=>({name:zs,setupOnce(){ri=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=xn(this),n=oi.has(h())&&t!==void 0?t:this;return ri.apply(n,e)}}catch{}},setup(e){oi.set(e,!0)}}),en=Ys;var Js=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Ks="EventFilters",Ws=(e={})=>({name:Ks,processEvent(t,n,r){let o=r.getOptions(),i=Vs(e,o);return qs(t,i)?null:t}}),Ar=Ws,nn=(e={})=>({...Ar(e),name:"InboundFilters"});function Vs(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Js],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function qs(e,t){return t.ignoreInternal&&ta(e)?(l&&p.warn(`Event dropped due to being internal Sentry Error.
Event: ${V(e)}`),!0):Xs(e,t.ignoreErrors)?(l&&p.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${V(e)}`),!0):ra(e)?(l&&p.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${V(e)}`),!0):Zs(e,t.ignoreTransactions)?(l&&p.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${V(e)}`),!0):Qs(e,t.denyUrls)?(l&&p.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${V(e)}.
Url: ${tn(e)}`),!0):ea(e,t.allowUrls)?!1:(l&&p.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${V(e)}.
Url: ${tn(e)}`),!0)}function Xs(e,t){return e.type||!t||!t.length?!1:Xt(e).some(n=>Pe(n,t))}function Zs(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;let n=e.transaction;return n?Pe(n,t):!1}function Qs(e,t){if(!t?.length)return!1;let n=tn(e);return n?Pe(n,t):!1}function ea(e,t){if(!t?.length)return!0;let n=tn(e);return n?Pe(n,t):!0}function ta(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function na(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function tn(e){try{let n=[...(e.exception?.values??[]).reverse()].find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?na(n):null}catch{return l&&p.error(`Cannot extract url for event ${V(e)}`),null}}function ra(e){return e.type||!e.exception?.values?.length?!1:!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value)}function Rr(e,t,n=250,r,o,i,s){if(!i.exception?.values||!s||!W(s.originalException,Error))return;let a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=oa(br(e,t,o,s.originalException,r,i.exception.values,a,0),n))}function br(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(W(r[o],Error)){ii(s,a);let u=e(t,r[o]),f=c.length;si(u,o,f,a),c=br(e,t,n,r[o],o,[u,...c],u,f)}return Array.isArray(r.errors)&&r.errors.forEach((u,f)=>{if(W(u,Error)){ii(s,a);let d=e(t,u),g=c.length;si(d,`errors[${f}]`,g,a),c=br(e,t,n,u,o,[d,...c],d,g)}}),c}function ii(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function si(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function oa(e,t){return e.map(n=>(n.value&&(n.value=M(n.value,t)),n))}var ia="cause",sa=5,aa="LinkedErrors",ca=(e={})=>{let t=e.limit||sa,n=e.key||ia;return{name:aa,preprocessEvent(r,o,i){let s=i.getOptions();Rr(Zt,s.stackParser,s.maxValueLength,n,t,r,o)}}},rn=ca;var ci=new Map,ai=new Set;function ua(e){if(_._sentryModuleMetadata)for(let t of Object.keys(_._sentryModuleMetadata)){let n=_._sentryModuleMetadata[t];if(ai.has(t))continue;ai.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){ci.set(o.filename,n);break}}}function pa(e,t){return ua(e),ci.get(t)}function on(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(let r of n.stacktrace.frames||[]){if(!r.filename||r.module_metadata)continue;let o=pa(e,r.filename);o&&(r.module_metadata=o)}})}catch{}}function sn(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(let n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}var fa=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{de(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&(sn(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;on(n,t)})}});function ui(e){let t={},n=0;for(;n<e.length;){let r=e.indexOf("=",n);if(r===-1)break;let o=e.indexOf(";",n);if(o===-1)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}let i=e.slice(n,r).trim();if(t[i]===void 0){let s=e.slice(r+1,o).trim();s.charCodeAt(0)===34&&(s=s.slice(1,-1));try{t[i]=s.indexOf("%")!==-1?decodeURIComponent(s):s}catch{t[i]=s}}n=o+1}return t}var Nr=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"];function pi(e){return Nr.map(o=>{let i=e[o],s=Array.isArray(i)?i.join(";"):i;return o==="Forwarded"?da(s):s?.split(",").map(a=>a.trim())}).reduce((o,i)=>i?o.concat(i):o,[]).find(o=>o!==null&&la(o))||null}function da(e){if(!e)return null;for(let t of e.split(";"))if(t.startsWith("for="))return t.slice(4);return null}function la(e){return/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(e)}var ma={cookies:!0,data:!0,headers:!0,query_string:!0,url:!0},ga="RequestData",_a=(e={})=>{let t={...ma,...e.include};return{name:ga,processEvent(n,r,o){let{sdkProcessingMetadata:i={}}=n,{normalizedRequest:s,ipAddress:a}=i,c={...t,ip:t.ip??o.getOptions().sendDefaultPii};return s&&ha(n,s,{ipAddress:a},c),n}}},fi=_a;function ha(e,t,n,r){if(e.request={...e.request,...Sa(t,r)},r.ip){let o=t.headers&&pi(t.headers)||n.ipAddress;o&&(e.user={...e.user,ip_address:o})}}function Sa(e,t){let n={},r={...e.headers};if(t.headers&&(n.headers=r,t.cookies||delete r.cookie,t.ip||Nr.forEach(o=>{delete r[o]})),n.method=e.method,t.url&&(n.url=e.url),t.cookies){let o=e.cookies||(r?.cookie?ui(r.cookie):void 0);n.cookies=o||{}}return t.query_string&&(n.query_string=e.query_string),t.data&&(n.data=e.data),n}function pt(e){let t="console";se(t,e),ae(t,Ea)}function Ea(){"console"in _&&ye.forEach(function(e){e in _.console&&Je(_.console,e,function(t){return ve[e]=t,function(...n){K("console",{args:n,level:e}),ve[e]?.apply(_.console,n)}})})}function ft(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var Ta="CaptureConsole",ya=(e={})=>{let t=e.levels||ye,n=e.handled??!0;return{name:Ta,setup(r){"console"in _&&pt(({args:o,level:i})=>{h()!==r||!t.includes(i)||Ia(o,i,n)})}}},di=ya;function Ia(e,t,n){let r={level:ft(t),extra:{arguments:e}};$(o=>{if(o.addEventProcessor(a=>(a.logger="console",ge(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){let a=`Assertion failed: ${Ie(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),ot(a,r)}return}let i=e.find(a=>a instanceof Error);if(i){rt(i,r);return}let s=Ie(e," ");ot(s,r)})}var xa="Dedupe",Aa=()=>{let e;return{name:xa,processEvent(t){if(t.type)return t;try{if(ba(t,e))return l&&p.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},an=Aa;function ba(e,t){return t?!!(Ra(e,t)||Na(e,t)):!1}function Ra(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!gi(e,t)||!mi(e,t))}function Na(e,t){let n=li(t),r=li(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!gi(e,t)||!mi(e,t))}function mi(e,t){let n=De(e),r=De(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function gi(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function li(e){return e.exception?.values&&e.exception.values[0]}var Ca="ExtraErrorData",va=(e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:Ca,processEvent(r,o,i){let{maxValueLength:s=250}=i.getOptions();return Oa(r,o,t,n,s)}}},_i=va;function Oa(e,t={},n,r,o){if(!t.originalException||!P(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=Da(t.originalException,r,o);if(s){let a={...e.contexts},c=w(s,n);return U(c)&&(x(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function Da(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=P(s)||typeof s=="string"?M(`${s}`,n):s}if(t&&e.cause!==void 0&&(o.cause=P(e.cause)?e.cause.toString():e.cause),typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=P(a)?a.toString():a}}return o}catch(r){l&&p.error("Unable to extract extra data from the Error object:",r)}return null}function wa(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var ka=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Si(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=ka.exec(t);return n?n.slice(1):[]}function Cr(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=wa(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function hi(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function vr(e,t){e=Cr(e).slice(1),t=Cr(t).slice(1);let n=hi(e.split("/")),r=hi(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function Or(e){let t=Si(e),n=t[0]||"",r=t[1];return!n&&!r?".":(r&&(r=r.slice(0,r.length-1)),n+r)}function Dr(e,t){let n=Si(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var Pa="RewriteFrames",Ei=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in _&&!!_.window,o=e.iteratee||Ma({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames&&a.frames.map(c=>o(c))}}return{name:Pa,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function Ma({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?vr(t,s):Dr(s);r.filename=`${n}${a}`}return r}}var Fa=10,Ua="ZodErrors";function La(e){return P(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function Ba(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function $a(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function Ha(e){let t=new Set;for(let r of e.issues){let o=$a(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${M(n.join(", "),100)}`}function Ga(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!La(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(Ba);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:Ha(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var ja=(e={})=>{let t=e.limit??Fa;return{name:Ua,processEvent(n,r){return Ga(t,e.saveZodIssuesAsAttachment,n,r)}}},Ti=ja;var za=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{de(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&(sn(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;on(r,n)})},processEvent(t){let n=Ya(t);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function Ya(e){let t=De(e);if(t)return t.filter(n=>!!n.filename).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(yi)).map(r=>r.slice(yi.length)):[])}var yi="_sentryBundlerPluginAppKey:";function Ii(e,t={},n=E()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,f={contexts:{feedback:S({contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c})},type:"feedback",level:"info",tags:u},d=n?.getClient()||h();return d&&d.emit("beforeSendFeedback",f,t),n.captureEvent(f,t)}function wr(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var kr=_;function xi(){if(!("fetch"in kr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Pr(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Mr(){if(typeof EdgeRuntime=="string")return!0;if(!xi())return!1;if(Pr(kr.fetch))return!0;let e=!1,t=kr.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Pr(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){k&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Ur(e,t){let n="fetch";se(n,e),ae(n,()=>Wa(void 0,t))}function Wa(e,t=!1){t&&!Mr()||Je(_,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=Va(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:b()*1e3,virtualError:o};return e||K("fetch",{...a}),n.apply(_,r).then(async c=>(e?e(c):K("fetch",{...a,endTimestamp:b()*1e3,response:c}),c),c=>{throw K("fetch",{...a,endTimestamp:b()*1e3,error:c}),P(c)&&c.stack===void 0&&(c.stack=o.stack,x(c,"framesToPop",1)),c})}})}function Fr(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ai(e){return typeof e=="string"?e:e?Fr(e,"url")?e.url:e.toString?e.toString():"":""}function Va(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Ai(n),method:Fr(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:Ai(t),method:Fr(t,"method")?String(t.method).toUpperCase():"GET"}}function Lr(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&e!==void 0&&!e.includes("node_modules/")}function Ri(e){let t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{let o=r.match(n);if(o){let i,s,a,c,u;if(o[1]){a=o[1];let g=a.lastIndexOf(".");if(a[g-1]==="."&&g--,g>0){i=a.slice(0,g),s=a.slice(g+1);let m=i.indexOf(".Module");m>0&&(a=a.slice(m+1),i=i.slice(0,m))}c=void 0}s&&(c=i,u=s),s==="<anonymous>"&&(u=void 0,a=void 0),a===void 0&&(u=u||Ge,a=c?`${c}.${u}`:u);let f=o[2]?.startsWith("file://")?o[2].slice(7):o[2],d=o[5]==="native";return f?.match(/\/[A-Z]:/)&&(f=f.slice(1)),!f&&o[5]&&!d&&(f=o[5]),{filename:f?decodeURI(f):void 0,module:e?e(f):void 0,function:a,lineno:bi(o[3]),colno:bi(o[4]),in_app:Lr(f||"",d)}}if(r.match(t))return{filename:r}}}function dt(e){return[90,Ri(e)]}function bi(e){return parseInt(e||"",10)||void 0}var lt=class{constructor(t){this._maxSize=t,this._cache=new Map}get size(){return this._cache.size}get(t){let n=this._cache.get(t);if(n!==void 0)return this._cache.delete(t),this._cache.set(t,n),n}set(t,n){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(t,n)}remove(t){let n=this._cache.get(t);return n&&this._cache.delete(t),n}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){let t=[];return this._cache.forEach(n=>t.push(n)),t}};function Za(){return Deno.permissions.querySync&&Deno.permissions.querySync({name:"sys",kind:"hostname"}).state==="granted"?Deno.hostname():void 0}var mt=class extends ct{constructor(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.deno",packages:[{name:"denoland:sentry",version:H}],version:H};let n={...t,platform:"javascript",runtime:{name:"deno",version:Deno.version.deno},serverName:t.serverName||Za()};super(n)}};var Qa="Breadcrumbs",ec=(e={})=>{let t={console:!0,fetch:!0,sentry:!0,...e};return{name:Qa,setup(n){t.console&&pt(nc(n)),t.fetch&&Ur(rc(n)),t.sentry&&n.on("beforeSendEvent",tc(n))}}},Br=ec;function tc(e){return function(n){h()===e&&Ce({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:V(n)},{event:n})}}function nc(e){return function(n){if(h()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:ft(n.level),message:Ie(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Ie(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ce(r,{input:n.args,level:n.level})}}function rc(e){return function(n){if(h()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(!o||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;let i={method:n.fetchData.method,url:n.fetchData.url};if(n.error){let s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o};Ce({category:"fetch",data:i,level:"error",type:"http"},s)}else{let s=n.response;i.request_body_size=n.fetchData.request_body_size,i.response_body_size=n.fetchData.response_body_size,i.status_code=s?.status;let a={input:n.args,response:s,startTimestamp:r,endTimestamp:o},c=wr(i.status_code);Ce({category:"fetch",data:i,type:"http",level:c},a)}}}var oc="DenoContext";function ic(){switch(Deno.build.os){case"darwin":return"macOS";case"linux":return"Linux";case"windows":return"Windows";default:return Deno.build.os}}async function sc(){return(await Deno.permissions.query({name:"sys",kind:"osRelease"})).state==="granted"?Deno.osRelease():void 0}async function ac(e){return e.contexts={app:{app_start_time:new Date(Date.now()-performance.now()).toISOString()},device:{arch:Deno.build.arch,processor_count:navigator.hardwareConcurrency},os:{name:ic(),version:await sc()},v8:{name:"v8",version:Deno.version.v8},typescript:{name:"TypeScript",version:Deno.version.typescript},...e.contexts},e}var cc=()=>({name:oc,processEvent(e){return ac(e)}}),$r=cc;var uc="ContextLines",Ni=new lt(100),pc=7;async function fc(e){let t=Ni.get(e);if(t!==void 0)return t;let n=null;try{n=await Deno.readTextFile(e)}catch{}return Ni.set(e,n),n}var dc=(e={})=>{let t=e.frameContextLines!==void 0?e.frameContextLines:pc;return{name:uc,processEvent(n){return lc(n,t)}}},Hr=dc;async function lc(e,t){if(t>0&&e.exception?.values)for(let n of e.exception.values)n.stacktrace?.frames&&await mc(n.stacktrace.frames,t);return e}async function mc(e,t){for(let n of e)if(n.filename&&n.in_app&&n.context_line===void 0&&(await Deno.permissions.query({name:"read",path:n.filename})).state=="granted"){let o=await fc(n.filename);if(o)try{let i=o.split(`
`);Rn(i,n,t)}catch{}}}var gc="GlobalHandlers",cn=!1,_c=e=>{let t={error:!0,unhandledrejection:!0,...e};return{name:gc,setup(n){t.error&&hc(n),t.unhandledrejection&&Sc(n)}}},Gr=_c;function hc(e){globalThis.addEventListener("error",t=>{if(h()!==e||cn)return;let n=Ci(),{message:r,error:o}=t,i=$e(e,n,o||r);i.level="fatal",it(i,{originalException:o,mechanism:{handled:!1,type:"error"}}),t.preventDefault(),cn=!0,st().then(()=>{throw o},()=>{throw o})})}function Sc(e){globalThis.addEventListener("unhandledrejection",t=>{if(h()!==e||cn)return;let n=Ci(),r=t;try{"reason"in t&&(r=t.reason)}catch{}let o=ke(r)?Ec(r):$e(e,n,r,void 0);o.level="fatal",it(o,{originalException:r,mechanism:{handled:!1,type:"unhandledrejection"}}),t.preventDefault(),cn=!0,st().then(()=>{throw r},()=>{throw r})})}function Ec(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Ci(){let e=h();return e?e.getOptions().stackParser:()=>[]}var Tc="NormalizePaths";function yc(e){let n=Oe(dt())(e.stack||"").filter(i=>i.in_app&&i.filename).map(i=>i.filename.replace(/^[A-Z]:/,"").replace(/\\/g,"/").split("/").filter(s=>s!=="")),r=n[0];if(!r)return;if(n.length==1)return Or(r.join("/"));let o=0;for(;r[o]&&n.every(i=>i[o]===r[o]);)o++;return r.slice(0,o).join("/")}function Ic(){if(!Deno.permissions.querySync)return;let e=Deno.permissions.querySync({name:"read",path:"./"});try{if(e.state=="granted")return Deno.cwd()}catch{}}var xc=()=>{let e;function t(n){return e===void 0&&(e=Ic()||yc(n)),e}return{name:Tc,processEvent(n){let r=new Error,o=t(r);if(o){for(let i of n.exception?.values||[])for(let s of i.stacktrace?.frames||[])if(s.filename&&s.in_app){let a=s.filename.indexOf(o);if(a>-1){let c=a+o.length;s.filename=`app://${s.filename.substring(c)}`}}}return n}}},jr=xc;function vi(e){let t=new URL(e.url);Deno.permissions.query({name:"net",host:t.host}).then(({state:r})=>{r!=="granted"&&G(()=>{console.warn(`Sentry SDK requires 'net' permission to send events.
    Run with '--allow-net=${t.host}' to grant the requires permissions.`)})}).catch(()=>{p.warn('Failed to read the "net" permission.')});function n(r){let o={body:r.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers};try{return Gt(()=>fetch(e.url,o).then(i=>({statusCode:i.status,headers:{"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")}})))}catch(i){return xe(i)}}return Qt(e,n)}function Oi(e){return[nn(),en(),rn(),an(),Br(),$r(),Hr(),jr(),Gr()]}var Ac=Oe(dt());function bc(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=Oi());let t={...e,stackParser:fn(e.stackParser||Ac),integrations:pr(e),transport:e.transport||vi};return Sr(mt,t)}function gt(e){if(e===void 0)return"*";if(typeof e=="number")return e.toString();{let{exact:t}=e;if(t===void 0){let{start:n,end:r,every:o}=e;if(n!==void 0&&r!==void 0&&o!==void 0)return`${n}-${r}/${o}`;if(n!==void 0&&r!==void 0)return`${n}-${r}`;if(n!==void 0&&o!==void 0)return`${n}/${o}`;if(n!==void 0)return`${n}/1`;if(r===void 0&&o!==void 0)return`*/${o}`;throw new TypeError("Invalid cron schedule")}else return typeof t=="number"?t.toString():t.join(",")}}function Di(e){if(typeof e=="string")return e;{let{minute:t,hour:n,dayOfMonth:r,month:o,dayOfWeek:i}=e;return`${gt(t)} ${gt(n)} ${gt(r)} ${gt(o)} ${gt(i)}`}}var Rc="DenoCron",wi=new WeakMap,Nc=()=>({name:Rc,setupOnce(){Deno.cron&&(Deno.cron=new Proxy(Deno.cron,{apply(e,t,n){let[r,o,i,s]=n,a,c;typeof i=="function"&&typeof s!="function"?(c=i,a=s):typeof i!="function"&&typeof s=="function"&&(c=s,a=i);async function u(){if(!wi.has(h()))return c();await Wt(r,async()=>c(),{schedule:{type:"crontab",value:Di(o)},maxRuntime:60*12,checkinMargin:1})}return e.call(t,r,o,a||{},u)}}))},setup(e){wi.set(e,!0)}}),Cc=Nc;export{mt as DenoClient,H as SDK_VERSION,Se as SEMANTIC_ATTRIBUTE_SENTRY_OP,pe as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,Fe as SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Y as SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,D as Scope,Ce as addBreadcrumb,jo as addEventProcessor,Br as breadcrumbsIntegration,Kt as captureCheckIn,di as captureConsoleIntegration,it as captureEvent,rt as captureException,Ii as captureFeedback,ot as captureMessage,Jo as captureSession,Ho as close,Hr as contextLinesIntegration,vo as continueTrace,Qt as createTransport,an as dedupeIntegration,$r as denoContextIntegration,Cc as denoCronIntegration,Vt as endSession,Ar as eventFiltersIntegration,_i as extraErrorDataIntegration,st as flush,en as functionToStringIntegration,ie as getActiveSpan,h as getClient,E as getCurrentScope,Oi as getDefaultIntegrations,yt as getGlobalScope,T as getIsolationScope,A as getRootSpan,kn as getSpanStatusFromHttpCode,ut as getTraceData,ni as getTraceMetaTags,Gr as globalHandlersIntegration,nn as inboundFiltersIntegration,bc as init,Go as isInitialized,$o as lastEventId,rn as linkedErrorsIntegration,jr as normalizePathsIntegration,fi as requestDataIntegration,Ei as rewriteFramesIntegration,Po as setContext,Er as setCurrentClient,Fo as setExtra,Mo as setExtras,Pn as setHttpStatus,xo as setMeasurement,Lo as setTag,Uo as setTags,Bo as setUser,yo as spanToBaggageHeader,y as spanToJSON,vt as spanToTraceHeader,$t as startInactiveSpan,Oo as startNewTrace,zo as startSession,Co as startSpan,nr as startSpanManual,Gt as suppressTracing,So as updateSpanName,It as withIsolationScope,Wt as withMonitor,$ as withScope,Ti as zodErrorsIntegration};
